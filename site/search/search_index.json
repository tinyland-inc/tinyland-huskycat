{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"HuskyCat Universal Code Validation Platform","text":"<p>Welcome to HuskyCat, the Universal Code Validation Platform with integrated MCP (Model Context Protocol) Server support for seamless Claude Code integration.</p>"},{"location":"#what-is-huskycat","title":"What is HuskyCat?","text":"<p>HuskyCat is a container-only validation platform designed for consistent toolchains, repository isolation, and AI integration:</p> <ul> <li>Container-Only Execution: Complete toolchain consistency across all environments</li> <li>Repository Safety: Validation tools run in isolation from your actual repository</li> <li>MCP Server Integration: stdio-based server for seamless Claude Code integration</li> <li>Git Hooks: Binary-first execution with container-backed validation</li> <li>Universal Validation: Python, JavaScript, YAML, Shell, Docker, security scanning</li> <li>Auto-Fix Support: Interactive auto-repair of validation issues</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#prerequisites-setup","title":"Prerequisites &amp; Setup","text":"<pre><code># Required: Container runtime (podman or docker)\n# Install podman: brew install podman (macOS) or apt install podman (Ubuntu)\n\n# Install dependencies\nnpm install\nuv sync --dev\n\n# Build container (required for all validation)\nnpm run container:build\n\n# Build binary entry point\nnpm run build:binary\n\n# Verify installation\n./dist/huskycat --version\n./dist/huskycat status\n</code></pre>"},{"location":"#key-features","title":"Key Features","text":""},{"location":"#container-only-execution","title":"\ud83d\udc33 Container-Only Execution","text":"<ul> <li>Consistent toolchain across all environments</li> <li>Complete isolation from host repository</li> <li>No \"tool not found\" errors - ever</li> </ul>"},{"location":"#repository-safety-isolation","title":"\ud83d\udd12 Repository Safety &amp; Isolation","text":"<ul> <li>Binary configs stored separately from repository</li> <li>Validation tools cannot interfere with actual files</li> <li>Read-only repository mounting for security</li> </ul>"},{"location":"#ai-integration-via-mcp","title":"\ud83e\udd16 AI Integration via MCP","text":"<ul> <li>stdio-based MCP server for Claude Code</li> <li>Container-backed validation tools as AI-callable functions</li> <li>Real-time code quality feedback with full toolchain</li> </ul>"},{"location":"#universal-validation-with-auto-fix","title":"\ud83d\udd04 Universal Validation with Auto-Fix","text":"<ul> <li>Core Tools: Black, Flake8, MyPy, Ruff</li> <li>Extended Tools: yamllint, shellcheck, hadolint, eslint</li> <li>Security: bandit, safety, dependency scanning</li> <li>GitLab CI: Schema validation and pipeline testing</li> <li>Auto-Fix: Interactive prompts for automatic issue resolution</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<p>HuskyCat enforces container-only execution for all validation operations:</p> <pre><code>graph LR\n    A[\"\ud83d\ude80 Binary Entry Point\"] --&gt; B[\"Container Runtime\"]\n    C[\"\ud83d\udee0\ufe0f NPM Scripts\"] --&gt; B\n    D[\"\ud83e\udd16 MCP Server\"] --&gt; B\n\n    B --&gt; E[\"\ud83d\udc33 Container Execution\"]\n    E --&gt; F[\"Complete Toolchain\"]\n    E --&gt; G[\"Repository Isolation\"] \n    E --&gt; H[\"Consistent Environment\"]\n\n    style B fill:#f3e5f5\n    style E fill:#e8f5e8\n    style F fill:#fff3e0</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Choose your installation method:</p> <p>All execution modes use container-only validation for consistency:</p> \ud83d\ude80 Binary Entry Point (Recommended)\ud83d\udee0\ufe0f NPM Script Development\ud83e\udd16 MCP Server Mode <p><pre><code>./dist/huskycat [command]            # Fast startup, container execution\n</code></pre> Best for: Git hooks, CI/CD, production deployments</p> <p><pre><code>npm run dev -- [command]            # Python module via NPM\n</code></pre> Best for: Development, testing, convenience</p> <p><pre><code>./dist/huskycat mcp-server           # stdio JSON-RPC server\n</code></pre> Best for: Claude Code integration, AI-powered validation</p> <p>All modes provide: Complete toolchain (Python + Node.js + Shell + Docker + Security) via container execution</p>"},{"location":"#usage-examples","title":"Usage Examples","text":""},{"location":"#core-operations","title":"Core Operations","text":"<pre><code># Fast binary execution (git hooks, production)\n./dist/huskycat validate --staged    # Validate staged files\n./dist/huskycat setup-hooks          # Install git hooks\n./dist/huskycat ci-validate .gitlab-ci.yml\n\n# Auto-fix validation (NEW)\n./dist/huskycat validate --fix       # Auto-fix validation issues\ngit addf &lt;files&gt;                     # Interactive auto-fix before staging\ngit addf .                          # Validate and auto-fix all files\n\n# Development mode (NPM scripts)\nnpm run validate                     # Quick validation\nnpm run validate:ci                  # CI configuration\nnpm run mcp:server                   # Start MCP server\n\n# Container mode (comprehensive)\nnpm run container:test:validate      # Full toolchain\n</code></pre>"},{"location":"#claude-code-integration","title":"Claude Code Integration","text":"<pre><code># Start MCP server (stdio protocol)\n./dist/huskycat mcp-server\n\n# Test connection\necho '{\"jsonrpc\": \"2.0\", \"method\": \"tools/list\", \"id\": 1}' | npm run mcp:server\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide - Detailed installation instructions</li> <li>Configuration - Customize validation rules</li> <li>MCP Server - Claude Code integration</li> <li>MCP Tools API - MCP server tools reference</li> <li>GitLab CI/CD - GitLab integration guide</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li>Documentation: https://huskycat.pages.io</li> <li>Issues: GitLab Issues</li> <li>Discussions: GitLab Discussions</li> </ul> <p>HuskyCat - Making code validation universal, fast, and intelligent.</p>"},{"location":"configuration/","title":"Configuration Reference","text":"<p>This document details all configuration options for HuskyCat's container-only validation platform.</p>"},{"location":"configuration/#linting-configuration-files","title":"Linting Configuration Files","text":""},{"location":"configuration/#ansible-lint","title":"<code>.ansible-lint</code>","text":"<p>Ansible-lint configuration with production-grade settings:</p> <pre><code># Profile settings\nprofile: production  # Enforces strict rules\n\n# Paths to exclude\nexclude_paths:\n  - .cache/\n  - node_modules/\n  - vendor/\n\n# Behavior\nprogressive: true   # Return non-zero on warnings\nstrict: true       # Enable strict mode\n\n# Rule configuration\nenable_list:       # Explicitly enabled rules\n  - args\n  - command-instead-of-module\n  - fqcn\n  - no-log-password\n  # ... more rules\n\nskip_list:         # Rules to skip\n  - experimental   # Skip experimental rules\n</code></pre>"},{"location":"configuration/#pyprojecttoml","title":"<code>pyproject.toml</code>","text":"<p>Python tooling configuration:</p> <pre><code>[tool.black]\nline-length = 88              # Line length limit\ntarget-version = ['py38']     # Python versions\nextend-exclude = '''          # Paths to exclude\n  /(\n    \\.git\n    | node_modules\n    | vendor\n  )/\n'''\n\n[tool.isort]\nprofile = \"black\"             # Compatible with Black\nline_length = 88\n\n[tool.mypy]\npython_version = \"3.8\"\nwarn_return_any = true\ndisallow_untyped_defs = true\n\n[tool.ruff]\nselect = [\"E\", \"F\", \"I\", ...]  # Rule sets to enable\nline-length = 88\ntarget-version = \"py38\"\n</code></pre>"},{"location":"configuration/#flake8","title":"<code>.flake8</code>","text":"<p>Flake8 configuration:</p> <pre><code>[flake8]\nmax-line-length = 88\nextend-ignore = E203, W503, E501  # Black compatibility\nexclude = \n    .git,\n    __pycache__,\n    node_modules,\n    vendor\nper-file-ignores = \n    __init__.py:F401              # Allow unused imports\n    test_*.py:F401,F811           # Test-specific ignores\n</code></pre>"},{"location":"configuration/#lintstagedrcjson","title":"<code>.lintstagedrc.json</code>","text":"<p>File-specific linting rules:</p> <pre><code>{\n  \"*.{ts,tsx,js,jsx}\": [\n    \"eslint --fix\",\n    \"prettier --write\"\n  ],\n  \"*.py\": [\n    \"black\",\n    \"flake8\"\n  ],\n  \"*.{yml,yaml}\": [\n    \"prettier --write\",\n    \"ansible-lint check (conditional)\"\n  ]\n}\n</code></pre>"},{"location":"configuration/#script-configuration","title":"Script Configuration","text":""},{"location":"configuration/#huskycat-container-configuration","title":"HuskyCat Container Configuration","text":"<p>Container-Only Execution: All validation runs in containers with complete toolchains.</p> <p>Environment variables: <pre><code># Container configuration\nHUSKYCAT_CONTAINER_RUNTIME=podman  # or docker\nHUSKYCAT_LOG_LEVEL=INFO            # DEBUG, INFO, WARNING, ERROR\nHUSKYCAT_CONFIG_DIR=~/.huskycat    # Config storage location\n\n# Validation behavior\nHUSKYCAT_AUTO_FIX=false            # Enable auto-fix by default\nHUSKYCAT_USE_CACHE=true            # Enable validation caching\n</code></pre></p> <p>Command-line options: <pre><code>--fix          # Enable auto-fix\n--all          # Validate all files\n--staged       # Validate only staged files (default)\n--verbose, -v  # Verbose output\n</code></pre></p>"},{"location":"configuration/#git-hook-configuration","title":"Git Hook Configuration","text":""},{"location":"configuration/#pre-commit-hook","title":"Pre-commit Hook","text":"<p>Container-only validation runs: 1. Staged file validation 2. Auto-fix when requested 3. Complete toolchain in isolated container 4. Repository read-only mounting</p> <p>Generated by: <code>./dist/huskycat setup-hooks</code> (do not edit manually)</p> <p>Customization: <pre><code># Temporary bypass (development only)\ngit commit --no-verify -m \"message\"\n</code></pre></p>"},{"location":"configuration/#commit-msg-hook","title":"Commit-msg Hook","text":"<p>Validates commit format: <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\nTypes: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert\n</code></pre></p> <p>Configuration: <pre><code># Skip issue check\nSKIP_ISSUE_CHECK=true git commit\n</code></pre></p>"},{"location":"configuration/#pre-push-hook","title":"Pre-push Hook","text":"<p>Runs before push: - Full linting (all files) - Affected tests - Large file detection - Security scanning</p>"},{"location":"configuration/#post-merge-hook","title":"Post-merge Hook","text":"<p>Automatic actions after merge: - Update dependencies - Run linting on changed files - Rebuild affected projects</p>"},{"location":"configuration/#gitlab-ci-configuration","title":"GitLab CI Configuration","text":""},{"location":"configuration/#basic-structure","title":"Basic Structure","text":"<pre><code>stages:\n  - validate\n  - lint\n  - test\n\nvariables:\n  PIP_CACHE_DIR: \"$CI_PROJECT_DIR/.cache/pip\"\n  npm_config_cache: \"$CI_PROJECT_DIR/.cache/npm\"\n\ncache:\n  paths:\n    - .cache/pip\n    - .cache/npm\n    - node_modules/\n    - .venv/\n</code></pre>"},{"location":"configuration/#job-templates","title":"Job Templates","text":"<p>Python linting job: <pre><code>lint:python:\n  stage: lint\n  image: python:3.11\n  before_script:\n    - pip install black flake8 mypy\n  script:\n    - black --check .\n    - flake8 .\n    - mypy .\n</code></pre></p>"},{"location":"configuration/#container-toolchain","title":"Container Toolchain","text":""},{"location":"configuration/#available-tools-in-container","title":"Available Tools in Container","text":"<p>Python Tools: - black, flake8, mypy, ruff - bandit, safety (security) - autoflake, isort (formatting)</p> <p>Shell Tools: - shellcheck, yamllint, hadolint - gitlab-ci-local (CI validation)</p> <p>JavaScript Tools: - eslint, prettier</p> <p>All tools are pre-installed in the container - no local installation needed.</p>"},{"location":"configuration/#adding-custom-validators","title":"Adding Custom Validators","text":"<p>Extend the ValidationEngine in <code>unified_validation.py</code>: <pre><code>class CustomValidator(Validator):\n    def can_handle(self, file_path: Path) -&gt; bool:\n        return file_path.suffix == '.custom'\n\n    def validate(self, file_path: Path) -&gt; ValidationResult:\n        # Container execution is automatic\n        return self._execute_command(['custom-tool', str(file_path)])\n</code></pre></p>"},{"location":"configuration/#disabling-specific-checks","title":"Disabling Specific Checks","text":"<p>Per-file basis: <pre><code># flake8: noqa\n# mypy: ignore-errors\n# pylint: disable=all\n</code></pre></p> <p>Project-wide: - Update respective config files - Modify <code>skip_list</code> or <code>ignore</code> sections</p>"},{"location":"configuration/#performance-caching","title":"Performance &amp; Caching","text":"<p>Container execution optimizations:</p> <ol> <li>Binary-first execution: Fast startup (~100ms)</li> <li>Container caching: Images cached locally</li> <li>Validation caching: Results cached in <code>~/.huskycat/cache</code></li> </ol> <pre><code># Clean caches\n./dist/huskycat clean --all\n\n# Rebuild container\nnpm run container:build\n\n# Status and performance info\n./dist/huskycat status\n</code></pre>"},{"location":"gitlab-auto-devops-complete/","title":"Complete GitLab Auto DevOps Integration Guide for HuskyCats","text":"<p>This comprehensive guide covers integrating HuskyCats Bates with GitLab Auto DevOps for complete CI/CD validation, linting, security scanning, and automated deployments.</p>"},{"location":"gitlab-auto-devops-complete/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"gitlab-auto-devops-complete/#option-1-use-huskycats-container-recommended","title":"Option 1: Use HuskyCats Container (Recommended)","text":"<pre><code># .gitlab-ci.yml\nimage: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n\nvariables:\n  # Auto DevOps configuration\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\n  # Disable unnecessary Auto DevOps features\n  TEST_DISABLED: 1\n  CODE_QUALITY_DISABLED: 1  # We use HuskyCats instead\n  CONTAINER_SCANNING_DISABLED: 1  # We use HuskyCats security scanning\n\n  # HuskyCats settings\n  LINT_AUTO_FIX: \"false\"\n  VERBOSE: \"true\"\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\nstages:\n  - validate\n  - build\n  - test\n  - review\n  - deploy\n\n# Override Auto DevOps test with HuskyCats validation\ntest:\n  stage: test\n  script:\n    - echo \"\ud83d\udc31 Running HuskyCats comprehensive validation...\"\n    - /workspace/scripts/comprehensive-lint.sh\n    - /workspace/scripts/auto-devops-validation.sh\n    - /workspace/scripts/validate-gitlab-ci-schema.py\n  artifacts:\n    paths:\n      - lint-results.txt\n      - validation-report.json\n    reports:\n      junit: test-results.xml\n    expire_in: 1 week\n  coverage: '/TOTAL.*\\s+(\\d+%)$/'\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#option-2-include-huskycats-template","title":"Option 2: Include HuskyCats Template","text":"<pre><code># .gitlab-ci.yml\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n  TEST_DISABLED: 1  # Use HuskyCats instead\n\n# Add HuskyCats validation before Auto DevOps stages\nhusky:validate:\n  stage: .pre\n  extends: .husky-comprehensive\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#auto-devops-integration-patterns","title":"\ud83c\udfd7\ufe0f Auto DevOps Integration Patterns","text":""},{"location":"gitlab-auto-devops-complete/#pattern-1-full-auto-devops-with-huskycats-validation","title":"Pattern 1: Full Auto DevOps with HuskyCats Validation","text":"<p>Complete Auto DevOps pipeline with comprehensive HuskyCats validation:</p> <pre><code># Auto DevOps with HuskyCats validation\nvariables:\n  # Auto DevOps core settings\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n  KUBE_NAMESPACE: $CI_PROJECT_NAME-production\n\n  # Helm deployment settings\n  HELM_UPGRADE_EXTRA_ARGS: \"--timeout=600s --wait\"\n  POSTGRES_ENABLED: false\n\n  # Disable Auto DevOps features replaced by HuskyCats\n  TEST_DISABLED: 1\n  CODE_QUALITY_DISABLED: 1\n  CONTAINER_SCANNING_DISABLED: 1\n  DEPENDENCY_SCANNING_DISABLED: 1\n\n  # HuskyCats configuration\n  AUTO_DEVOPS_VALIDATION: \"true\"\n  GITLAB_CI_VALIDATION: \"true\"\n  COMPREHENSIVE_LINT: \"true\"\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Override Auto DevOps test stage with HuskyCats\ntest:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - echo \"\ud83d\udc31 HuskyCats Auto DevOps Validation Suite\"\n\n    # 1. Validate GitLab CI configuration\n    - echo \"\ud83d\udd0d Step 1: GitLab CI Schema Validation\"\n    - python3 /workspace/scripts/validate-gitlab-ci-schema.py\n\n    # 2. Validate Auto DevOps configuration\n    - echo \"\ud83d\udd0d Step 2: Auto DevOps Configuration Validation\"\n    - /workspace/scripts/auto-devops-validation.sh --verbose\n\n    # 3. Comprehensive code linting\n    - echo \"\ud83d\udd0d Step 3: Comprehensive Code Quality\"\n    - /workspace/scripts/comprehensive-lint.sh --all\n\n    # 4. Security scanning\n    - echo \"\ud83d\udd0d Step 4: Security Validation\"\n    - /workspace/scripts/security-scan.sh\n\n    # 5. Generate validation report\n    - echo \"\ud83d\udcca Generating validation report...\"\n    - |\n      cat &gt; validation-summary.json &lt;&lt; EOF\n      {\n        \"validation_timestamp\": \"$(date -Iseconds)\",\n        \"project\": \"$CI_PROJECT_NAME\",\n        \"commit\": \"$CI_COMMIT_SHA\",\n        \"branch\": \"$CI_COMMIT_REF_NAME\",\n        \"auto_devops_enabled\": true,\n        \"huskycats_version\": \"$(cat /workspace/VERSION 2&gt;/dev/null || echo 'latest')\",\n        \"validations_passed\": [\n          \"gitlab_ci_schema\",\n          \"auto_devops_config\",\n          \"code_quality\",\n          \"security_scan\"\n        ]\n      }\n      EOF\n\n  artifacts:\n    paths:\n      - lint-results.txt\n      - validation-summary.json\n      - auto-devops-validation.log\n    reports:\n      junit: test-results.xml\n      coverage_report:\n        coverage_format: cobertura\n        path: coverage.xml\n    expire_in: 1 week\n\n  # Run on all branches and MRs\n  rules:\n    - if: '$CI_MERGE_REQUEST_ID'\n    - if: '$CI_COMMIT_BRANCH'\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#pattern-2-staged-validation-pipeline","title":"Pattern 2: Staged Validation Pipeline","text":"<p>Multi-stage validation with different levels:</p> <pre><code># Staged validation approach\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\nstages:\n  - quick-check\n  - comprehensive-validate\n  - build\n  - test\n  - review\n  - deploy\n\n# Quick validation for fast feedback\nquick-validate:\n  stage: quick-check\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - echo \"\u26a1 Quick HuskyCats validation for fast feedback\"\n    - python3 /workspace/scripts/validate-gitlab-ci-schema.py\n    - /workspace/scripts/comprehensive-lint.sh --staged\n  rules:\n    - if: '$CI_MERGE_REQUEST_ID'\n      changes:\n        - \"**/*.py\"\n        - \"**/*.js\"\n        - \"**/*.ts\"\n        - \"**/*.yml\"\n        - \"**/*.yaml\"\n        - \".gitlab-ci.yml\"\n  allow_failure: false\n\n# Comprehensive validation for main branches\ncomprehensive-validate:\n  stage: comprehensive-validate\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - echo \"\ud83d\udd0d Comprehensive HuskyCats validation suite\"\n    - /workspace/scripts/comprehensive-lint.sh --all\n    - /workspace/scripts/auto-devops-validation.sh --verbose\n  artifacts:\n    paths:\n      - lint-results.txt\n      - auto-devops-validation.log\n    expire_in: 1 week\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\" || $CI_COMMIT_BRANCH == \"develop\"'\n    - if: '$CI_MERGE_REQUEST_ID'\n      when: manual\n      allow_failure: true\n\n# Override Auto DevOps test to reference our validation\ntest:\n  stage: test\n  dependencies:\n    - comprehensive-validate\n  script:\n    - echo \"\u2705 HuskyCats validation completed successfully\"\n    - echo \"Proceeding with Auto DevOps deployment...\"\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#pattern-3-environment-specific-validation","title":"Pattern 3: Environment-Specific Validation","text":"<p>Different validation levels for different environments:</p> <pre><code># Environment-specific validation\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Development environment - basic validation\nvalidate:development:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --basic\n  environment:\n    name: development\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"develop\"'\n\n# Staging environment - comprehensive validation\nvalidate:staging:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --all\n    - /workspace/scripts/auto-devops-validation.sh\n  environment:\n    name: staging\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"release/*\"'\n\n# Production environment - full validation + security audit\nvalidate:production:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --all --strict\n    - /workspace/scripts/auto-devops-validation.sh --strict\n    - /workspace/scripts/security-audit.sh\n  environment:\n    name: production\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n  allow_failure: false\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#auto-devops-configuration-files","title":"\ud83d\udd27 Auto DevOps Configuration Files","text":""},{"location":"gitlab-auto-devops-complete/#helm-values-configuration","title":"Helm Values Configuration","text":"<p>Create environment-specific Helm values files:</p> <pre><code># values.yaml (base configuration)\nreplicaCount: 1\n\nimage:\n  repository: placeholder  # Will be overridden by Auto DevOps\n  tag: placeholder         # Will be overridden by Auto DevOps\n  pullPolicy: IfNotPresent\n\nservice:\n  enabled: true\n  type: ClusterIP\n  port: 8080\n\ningress:\n  enabled: true\n  annotations:\n    kubernetes.io/ingress.class: \"nginx\"\n    cert-manager.io/cluster-issuer: \"letsencrypt-prod\"\n  hosts:\n    - host: myapp.example.com\n      paths:\n        - path: /\n          pathType: Prefix\n\nresources:\n  limits:\n    cpu: 200m\n    memory: 256Mi\n  requests:\n    cpu: 100m\n    memory: 128Mi\n\n# Health checks\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 30\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 5\n\n# PostgreSQL (if needed)\npostgresql:\n  enabled: false\n\n# Redis (if needed)\nredis:\n  enabled: false\n</code></pre> <pre><code># values-production.yaml (production overrides)\nreplicaCount: 3\n\ningress:\n  hosts:\n    - host: myapp.production.com\n      paths:\n        - path: /\n          pathType: Prefix\n\nresources:\n  limits:\n    cpu: 500m\n    memory: 512Mi\n  requests:\n    cpu: 250m\n    memory: 256Mi\n\npostgresql:\n  enabled: true\n  auth:\n    database: myapp_prod\n    username: myapp_user\n  primary:\n    persistence:\n      enabled: true\n      size: 10Gi\n</code></pre> <pre><code># values-staging.yaml (staging overrides)  \nreplicaCount: 2\n\ningress:\n  hosts:\n    - host: myapp.staging.com\n      paths:\n        - path: /\n          pathType: Prefix\n\nresources:\n  limits:\n    cpu: 300m\n    memory: 384Mi\n  requests:\n    cpu: 150m\n    memory: 192Mi\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#kubernetes-manifests","title":"Kubernetes Manifests","text":"<p>Additional Kubernetes resources in <code>k8s/</code> directory:</p> <pre><code># k8s/configmap.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: myapp-config\n  labels:\n    app: myapp\ndata:\n  config.yaml: |\n    app:\n      name: myapp\n      environment: production\n      debug: false\n    database:\n      pool_size: 10\n      timeout: 30\n</code></pre> <pre><code># k8s/secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: myapp-secrets\n  labels:\n    app: myapp\ntype: Opaque\nstringData:\n  database-password: \"REPLACE_IN_PRODUCTION\"\n  api-key: \"REPLACE_IN_PRODUCTION\"\n</code></pre> <pre><code># k8s/networkpolicy.yaml\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: myapp-network-policy\nspec:\n  podSelector:\n    matchLabels:\n      app: myapp\n  policyTypes:\n  - Ingress\n  - Egress\n  ingress:\n  - from:\n    - podSelector:\n        matchLabels:\n          app: nginx-ingress\n    ports:\n    - protocol: TCP\n      port: 8080\n  egress:\n  - to:\n    - podSelector:\n        matchLabels:\n          app: postgresql\n    ports:\n    - protocol: TCP\n      port: 5432\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#huskycats-validation-features","title":"\ud83d\udcca HuskyCats Validation Features","text":""},{"location":"gitlab-auto-devops-complete/#gitlab-ci-schema-validation","title":"GitLab CI Schema Validation","text":"<p>HuskyCats includes official GitLab CI schema validation:</p> <pre><code># Validate .gitlab-ci.yml against official GitLab schema\npython3 /workspace/scripts/validate-gitlab-ci-schema.py\n\n# Output example:\n# \u2705 .gitlab-ci.yml is valid according to GitLab CI schema\n# \u2139\ufe0f  Using cached GitLab CI schema\n# \u2139\ufe0f  Found 1 GitLab CI file(s)\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#auto-devops-configuration-validation","title":"Auto DevOps Configuration Validation","text":"<p>Comprehensive validation of Auto DevOps setup:</p> <pre><code># Validate Auto DevOps configuration\n/workspace/scripts/auto-devops-validation.sh --verbose\n\n# Checks performed:\n# - GitLab CI Auto DevOps template inclusion\n# - Required environment variables\n# - Helm values file syntax\n# - Kubernetes manifest validation\n# - Auto Deploy Image chart simulation\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#code-quality-validation","title":"Code Quality Validation","text":"<p>Multi-language linting and quality checks:</p> <pre><code># Run comprehensive linting\n/workspace/scripts/comprehensive-lint.sh --all\n\n# Includes:\n# - Python (Black, Flake8, MyPy, Pylint, Bandit)\n# - JavaScript/TypeScript (ESLint, Prettier)\n# - Shell scripts (ShellCheck)\n# - Docker files (Hadolint)\n# - YAML files (yamllint)\n# - Ansible playbooks (ansible-lint)\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#security-scanning","title":"Security Scanning","text":"<p>Built-in security validation:</p> <pre><code># Security scanning\n/workspace/scripts/security-scan.sh\n\n# Includes:\n# - Python dependency security (Safety, Bandit)\n# - JavaScript dependency audit (npm audit)\n# - Secret detection\n# - Container security scanning\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#troubleshooting-guide","title":"\ud83d\udea8 Troubleshooting Guide","text":""},{"location":"gitlab-auto-devops-complete/#common-auto-devops-issues","title":"Common Auto DevOps Issues","text":""},{"location":"gitlab-auto-devops-complete/#1-application-not-accessible-after-deployment","title":"1. \"Application not accessible after deployment\"","text":"<pre><code># Check service and ingress configuration\n# values.yaml\nservice:\n  enabled: true\n  type: ClusterIP\n  port: 8080        # Make sure this matches your app port\n\ningress:\n  enabled: true\n  annotations:\n    kubernetes.io/ingress.class: \"nginx\"  # Verify ingress class\n  hosts:\n    - host: myapp.example.com  # Ensure DNS is configured\n      paths:\n        - path: /\n          pathType: Prefix\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#2-helm-deployment-failed","title":"2. \"Helm deployment failed\"","text":"<pre><code># Debug Helm template generation\nhelm template my-app ~/.cache/huskycats/auto-deploy-image/assets/auto-deploy-app \\\n  -f values.yaml \\\n  --set application.repository=$CI_APPLICATION_REPOSITORY \\\n  --set application.tag=$CI_APPLICATION_TAG \\\n  --debug\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#3-container-fails-to-start","title":"3. \"Container fails to start\"","text":"<pre><code># Add proper health checks and resource limits\n# values.yaml\nlivenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 60  # Increase if app takes time to start\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /ready\n    port: 8080\n  initialDelaySeconds: 10\n  periodSeconds: 5\n\nresources:\n  limits:\n    memory: 512Mi      # Ensure adequate memory\n    cpu: 500m\n  requests:\n    memory: 256Mi\n    cpu: 250m\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#huskycats-validation-issues","title":"HuskyCats Validation Issues","text":""},{"location":"gitlab-auto-devops-complete/#1-gitlab-ci-schema-validation-failed","title":"1. \"GitLab CI schema validation failed\"","text":"<pre><code># Check for common YAML syntax errors\npython3 /workspace/scripts/validate-gitlab-ci-schema.py\n\n# Common fixes:\n# - Ensure proper YAML indentation\n# - Use arrays for scripts, not objects\n# - Check for typos in keywords\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#2-auto-devops-validation-failed","title":"2. \"Auto DevOps validation failed\"","text":"<pre><code># Run validation with verbose output\n/workspace/scripts/auto-devops-validation.sh --verbose\n\n# Check:\n# - CI_APPLICATION_REPOSITORY is set\n# - CI_APPLICATION_TAG is set\n# - Helm values files have valid YAML syntax\n# - Required environment variables are configured\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#3-permission-denied-in-ci","title":"3. \"Permission denied in CI\"","text":"<pre><code># Add proper permissions in before_script\nbefore_script:\n  - chmod +x /workspace/scripts/*.sh\n  - chown -R root:root /workspace\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#performance-optimization","title":"\ud83d\udcc8 Performance Optimization","text":""},{"location":"gitlab-auto-devops-complete/#ci-pipeline-optimization","title":"CI Pipeline Optimization","text":"<pre><code># Optimize pipeline performance\nvariables:\n  # Use shallow clones for faster checkout\n  GIT_DEPTH: 10\n\n  # Enable parallel job execution\n  PARALLEL_JOBS: 4\n\n  # Use caching effectively\n  PIP_CACHE_DIR: \"$CI_PROJECT_DIR/.cache/pip\"\n  npm_config_cache: \"$CI_PROJECT_DIR/.cache/npm\"\n\ncache:\n  key:\n    files:\n      - requirements.txt\n      - package-lock.json\n  paths:\n    - .cache/pip\n    - .cache/npm\n    - node_modules/\n  policy: pull-push\n\n# Use specific stages for better parallelization\nstages:\n  - pre-validate    # Quick checks\n  - validate        # Comprehensive validation  \n  - build          # Auto DevOps build\n  - test           # Auto DevOps test\n  - review         # Auto DevOps review\n  - deploy         # Auto DevOps deploy\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#container-optimization","title":"Container Optimization","text":"<pre><code># Optimized Dockerfile for Auto DevOps\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production &amp;&amp; npm cache clean --force\n\nFROM node:18-alpine AS runtime\nRUN addgroup -g 1001 -S nodejs &amp;&amp; adduser -S app -u 1001\nWORKDIR /app\nCOPY --from=builder --chown=app:nodejs /app/node_modules ./node_modules\nCOPY --chown=app:nodejs . .\nUSER app\nEXPOSE 8080\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD curl -f http://localhost:8080/health || exit 1\nCMD [\"npm\", \"start\"]\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#advanced-use-cases","title":"\ud83d\udcda Advanced Use Cases","text":""},{"location":"gitlab-auto-devops-complete/#multi-service-application","title":"Multi-Service Application","text":"<pre><code># .gitlab-ci.yml for microservices\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Validate each service\nvalidate:service-a:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - cd services/service-a\n    - /workspace/scripts/comprehensive-lint.sh\n    - /workspace/scripts/auto-devops-validation.sh\n  rules:\n    - changes:\n        - \"services/service-a/**/*\"\n\nvalidate:service-b:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - cd services/service-b\n    - /workspace/scripts/comprehensive-lint.sh\n    - /workspace/scripts/auto-devops-validation.sh\n  rules:\n    - changes:\n        - \"services/service-b/**/*\"\n\n# Deploy services independently\ndeploy:service-a:\n  extends: .auto-deploy\n  variables:\n    CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE/service-a\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-service-a\n  rules:\n    - changes:\n        - \"services/service-a/**/*\"\n\ndeploy:service-b:\n  extends: .auto-deploy\n  variables:\n    CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE/service-b\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-service-b\n  rules:\n    - changes:\n        - \"services/service-b/**/*\"\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#blue-green-deployment","title":"Blue-Green Deployment","text":"<pre><code># Blue-green deployment with HuskyCats validation\nvariables:\n  CI_APPLICATION_REPOSITORY: $CI_REGISTRY_IMAGE\n  CI_APPLICATION_TAG: $CI_COMMIT_SHA\n  AUTO_DEVOPS_DEPLOY_DEBUG: 1\n\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n\n# Comprehensive validation before blue-green deploy\nvalidate:production:\n  stage: test\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  script:\n    - echo \"\ud83d\udd0d Production validation suite\"\n    - /workspace/scripts/comprehensive-lint.sh --all --strict\n    - /workspace/scripts/auto-devops-validation.sh --strict\n    - /workspace/scripts/security-audit.sh --production\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  allow_failure: false\n\n# Blue deployment (current production)\ndeploy:blue:\n  extends: .auto-deploy\n  stage: production\n  environment:\n    name: production-blue\n    url: http://blue.myapp.example.com\n  variables:\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-blue\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n\n# Green deployment (new version)  \ndeploy:green:\n  extends: .auto-deploy\n  stage: production  \n  environment:\n    name: production-green\n    url: http://green.myapp.example.com\n  variables:\n    KUBE_NAMESPACE: $CI_PROJECT_NAME-green\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n\n# Switch traffic to green\nswitch:traffic:\n  stage: production\n  image: kubectl:latest\n  script:\n    - echo \"Switching traffic from blue to green\"\n    - kubectl patch service myapp-service -p '{\"spec\":{\"selector\":{\"version\":\"green\"}}}'\n  environment:\n    name: production\n    url: http://myapp.example.com\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  when: manual\n  needs:\n    - deploy:green\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#integration-templates","title":"\ud83d\udd17 Integration Templates","text":""},{"location":"gitlab-auto-devops-complete/#template-library","title":"Template Library","text":"<p>Create reusable templates in <code>.gitlab/ci/</code> directory:</p> <pre><code># .gitlab/ci/huskycats-validation.yml\n.husky-base:\n  image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n  before_script:\n    - chmod +x /workspace/scripts/*.sh\n\n.husky-quick:\n  extends: .husky-base\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --staged\n\n.husky-comprehensive:\n  extends: .husky-base\n  script:\n    - /workspace/scripts/comprehensive-lint.sh --all\n    - /workspace/scripts/auto-devops-validation.sh\n    - python3 /workspace/scripts/validate-gitlab-ci-schema.py\n  artifacts:\n    paths:\n      - lint-results.txt\n      - validation-report.json\n    expire_in: 1 week\n\n.husky-security:\n  extends: .husky-base\n  script:\n    - /workspace/scripts/security-scan.sh\n    - /workspace/scripts/comprehensive-lint.sh --security-only\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#project-integration","title":"Project Integration","text":"<pre><code># Use templates in your project\ninclude:\n  - template: Auto-DevOps.gitlab-ci.yml\n  - local: '.gitlab/ci/huskycats-validation.yml'\n\n# Quick validation for merge requests\nhusky:quick:\n  extends: .husky-quick\n  stage: .pre\n  rules:\n    - if: '$CI_MERGE_REQUEST_ID'\n\n# Comprehensive validation for main branches\nhusky:comprehensive:\n  extends: .husky-comprehensive\n  stage: test\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\" || $CI_COMMIT_BRANCH == \"develop\"'\n\n# Security validation for production\nhusky:security:\n  extends: .husky-security\n  stage: test\n  rules:\n    - if: '$CI_COMMIT_BRANCH == \"main\"'\n  allow_failure: false\n</code></pre>"},{"location":"gitlab-auto-devops-complete/#migration-checklist","title":"\ud83d\udccb Migration Checklist","text":""},{"location":"gitlab-auto-devops-complete/#from-manual-ci-to-auto-devops-huskycats","title":"From Manual CI to Auto DevOps + HuskyCats","text":"<ul> <li> Configure Auto DevOps variables</li> <li> Set <code>CI_APPLICATION_REPOSITORY</code></li> <li> Set <code>CI_APPLICATION_TAG</code></li> <li> <p> Configure environment-specific variables</p> </li> <li> <p> Create Helm values files</p> </li> <li> <code>values.yaml</code> (base configuration)</li> <li> <code>values-staging.yaml</code> (staging overrides)</li> <li> <p> <code>values-production.yaml</code> (production overrides)</p> </li> <li> <p> Configure Kubernetes resources</p> </li> <li> Create <code>k8s/</code> directory for additional manifests</li> <li> Add ConfigMaps, Secrets, NetworkPolicies as needed</li> <li> <p> Configure proper resource limits and health checks</p> </li> <li> <p> Update .gitlab-ci.yml</p> </li> <li> Include Auto DevOps template</li> <li> Add HuskyCats validation jobs</li> <li> <p> Configure proper stages and rules</p> </li> <li> <p> Test the pipeline</p> </li> <li> Test on feature branch</li> <li> Test merge request pipeline</li> <li> Test deployment to staging</li> <li> <p> Test deployment to production</p> </li> <li> <p> Monitor and optimize</p> </li> <li> Review pipeline performance</li> <li> Optimize caching</li> <li> Fine-tune validation rules</li> </ul>"},{"location":"gitlab-auto-devops-complete/#benefits-summary","title":"\ud83c\udf89 Benefits Summary","text":""},{"location":"gitlab-auto-devops-complete/#huskycats-auto-devops-benefits","title":"HuskyCats + Auto DevOps Benefits","text":"<ol> <li>\ud83d\ude80 Faster Development</li> <li>Pre-built container with all tools</li> <li>No setup time for linting/validation</li> <li> <p>Automated deployments</p> </li> <li> <p>\ud83d\udd12 Better Security</p> </li> <li>Comprehensive security scanning</li> <li>Dependency vulnerability checks</li> <li> <p>Secret detection</p> </li> <li> <p>\ud83d\udccf Consistent Quality</p> </li> <li>Same validation locally and in CI</li> <li>Multi-language linting</li> <li> <p>Official GitLab CI schema validation</p> </li> <li> <p>\ud83d\udd04 Simplified Operations</p> </li> <li>Automated Kubernetes deployments</li> <li>Environment-specific configurations</li> <li> <p>Built-in monitoring and health checks</p> </li> <li> <p>\ud83d\udcca Better Visibility</p> </li> <li>Comprehensive validation reports</li> <li>Quality metrics and trends</li> <li>Clear failure reasons</li> </ol>"},{"location":"gitlab-auto-devops-complete/#additional-resources","title":"\ud83d\udcda Additional Resources","text":"<ul> <li>GitLab Auto DevOps Documentation</li> <li>Auto Deploy Image Repository</li> <li>HuskyCat Installation Guide</li> <li>HuskyCat Configuration</li> <li>Kubernetes Best Practices</li> <li>Helm Chart Development</li> </ul> <p>Need help? Check the troubleshooting section above or create an issue in the HuskyCats repository.</p>"},{"location":"gitlab-ci-cd/","title":"GitLab CI/CD Integration","text":"<p>HuskyCats Bates provides comprehensive CI/CD validation using the published container image. The container must be built and published manually using podman or docker on your local machine.</p>"},{"location":"gitlab-ci-cd/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"gitlab-ci-cd/#option-1-include-huskycats-template","title":"Option 1: Include HuskyCats Template","text":"<p>Add this to your <code>.gitlab-ci.yml</code>:</p> <pre><code>include:\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nstages:\n  - test\n\n# This will run comprehensive validation\nhusky:validate:\n  stage: test\n</code></pre>"},{"location":"gitlab-ci-cd/#option-2-custom-configuration","title":"Option 2: Custom Configuration","text":"<pre><code>image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n\nstages:\n  - validate\n  - lint\n  - security\n  - test\n\n# Run all validations\nvalidate:all:\n  stage: validate\n  script:\n    - cd /workspace\n    - cp -r ${CI_PROJECT_DIR}/* /workspace/\n    - ./scripts/comprehensive-lint.sh\n</code></pre>"},{"location":"gitlab-ci-cd/#available-jobs","title":"\ud83d\udccb Available Jobs","text":""},{"location":"gitlab-ci-cd/#validation-jobs","title":"Validation Jobs","text":"Job Description Runs On <code>validate:gitlab-ci</code> Validates <code>.gitlab-ci.yml</code> syntax CI file changes <code>validate:auto-devops</code> Validates Auto DevOps configuration K8s/Helm changes <code>validate:comprehensive</code> Runs all linters and validators All changes"},{"location":"gitlab-ci-cd/#linting-jobs","title":"Linting Jobs","text":"Job Description Tools Used <code>lint:python</code> Python code quality Black, Flake8, MyPy, Ruff, Pylint <code>lint:javascript</code> JS/TS code quality ESLint, Prettier <code>lint:shell</code> Shell script analysis ShellCheck <code>lint:docker</code> Dockerfile best practices Hadolint <code>lint:yaml</code> YAML validation yamllint <code>lint:ansible</code> Ansible playbook linting ansible-lint"},{"location":"gitlab-ci-cd/#security-jobs","title":"Security Jobs","text":"Job Description Checks For <code>security:secrets</code> Secret scanning Passwords, API keys, tokens <code>security:python</code> Python security Bandit, Safety"},{"location":"gitlab-ci-cd/#test-jobs","title":"Test Jobs","text":"Job Description Output <code>test:unit</code> Run unit tests JUnit XML, Coverage <code>quality:report</code> Generate quality metrics Quality report artifact"},{"location":"gitlab-ci-cd/#configuration","title":"\ud83d\udd27 Configuration","text":""},{"location":"gitlab-ci-cd/#environment-variables","title":"Environment Variables","text":"<pre><code>variables:\n  # Disable shallow clone for full repo access\n  GIT_DEPTH: 0\n\n  # Python settings\n  PYTHONUNBUFFERED: \"1\"\n\n  # Node settings\n  NODE_ENV: \"ci\"\n\n  # Custom linting options\n  LINT_PYTHON_BLACK: \"true\"\n  LINT_PYTHON_FLAKE8: \"true\"\n  AUTO_FIX: \"false\"\n</code></pre>"},{"location":"gitlab-ci-cd/#caching","title":"Caching","text":"<p>Speed up CI runs with caching:</p> <pre><code>cache:\n  key: ${CI_COMMIT_REF_SLUG}\n  paths:\n    - node_modules/\n    - .npm/\n    - .cache/\n    - .venv/\n</code></pre>"},{"location":"gitlab-ci-cd/#use-cases","title":"\ud83c\udfaf Use Cases","text":""},{"location":"gitlab-ci-cd/#1-python-project","title":"1. Python Project","text":"<pre><code>include:\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nstages:\n  - lint\n  - test\n\n# Python-specific validation\npython:quality:\n  extends: husky:python\n  stage: lint\n\n# Run tests after linting\ntest:pytest:\n  extends: .husky\n  stage: test\n  script:\n    - python -m pytest\n</code></pre>"},{"location":"gitlab-ci-cd/#2-nodejs-project","title":"2. Node.js Project","text":"<pre><code>image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n\nstages:\n  - install\n  - lint\n  - test\n\ninstall:deps:\n  stage: install\n  script:\n    - npm ci\n  cache:\n    key: ${CI_COMMIT_REF_SLUG}\n    paths:\n      - node_modules/\n\nlint:js:\n  stage: lint\n  script:\n    - npx eslint .\n    - npx prettier --check .\n  needs: [\"install:deps\"]\n</code></pre>"},{"location":"gitlab-ci-cd/#3-mixed-language-project","title":"3. Mixed Language Project","text":"<pre><code>image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n\nstages:\n  - validate\n\n# Run all validations\nvalidate:all:\n  stage: validate\n  before_script:\n    - cd /workspace\n    - cp -r ${CI_PROJECT_DIR}/* /workspace/\n    - cp -r ${CI_PROJECT_DIR}/.* /workspace/ 2&gt;/dev/null || true\n  script:\n    - ./scripts/comprehensive-lint.sh\n  artifacts:\n    paths:\n      - lint-results.txt\n    expire_in: 1 week\n</code></pre>"},{"location":"gitlab-ci-cd/#4-security-focused-pipeline","title":"4. Security-Focused Pipeline","text":"<pre><code>include:\n  - remote: 'https://gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/-/raw/main/.gitlab/ci/husky-validation.yml'\n\nstages:\n  - security\n\n# Fail on security issues\nsecurity:scan:\n  extends: husky:security\n  stage: security\n  allow_failure: false\n</code></pre>"},{"location":"gitlab-ci-cd/#artifacts-and-reports","title":"\ud83d\udcca Artifacts and Reports","text":""},{"location":"gitlab-ci-cd/#junit-test-reports","title":"JUnit Test Reports","text":"<pre><code>test:results:\n  script:\n    - python -m pytest --junitxml=test-results.xml\n  artifacts:\n    reports:\n      junit: test-results.xml\n</code></pre>"},{"location":"gitlab-ci-cd/#coverage-reports","title":"Coverage Reports","text":"<pre><code>test:coverage:\n  script:\n    - python -m pytest --cov --cov-report=xml\n  coverage: '/TOTAL.*\\s+(\\d+%)$/'\n  artifacts:\n    reports:\n      coverage_report:\n        coverage_format: cobertura\n        path: coverage.xml\n</code></pre>"},{"location":"gitlab-ci-cd/#quality-reports","title":"Quality Reports","text":"<pre><code>quality:metrics:\n  extends: .husky\n  script:\n    - ./scripts/comprehensive-lint.sh &gt; quality-report.txt\n  artifacts:\n    paths:\n      - quality-report.txt\n    expire_in: 1 month\n</code></pre>"},{"location":"gitlab-ci-cd/#troubleshooting","title":"\ud83d\udea8 Troubleshooting","text":""},{"location":"gitlab-ci-cd/#common-issues","title":"Common Issues","text":"<ol> <li>\"Docker-in-Docker not available\"</li> <li> <p>Not needed! HuskyCats image includes all tools</p> </li> <li> <p>\"Permission denied\" errors</p> </li> <li> <p>Add execution permissions in before_script:    <pre><code>before_script:\n  - chmod +x scripts/*.sh\n</code></pre></p> </li> <li> <p>\"Module not found\" errors</p> </li> <li>Install dependencies in the job:    <pre><code>script:\n  - pip install -r requirements.txt\n  - npm install\n</code></pre></li> </ol>"},{"location":"gitlab-ci-cd/#debugging","title":"Debugging","text":"<p>Enable verbose output:</p> <pre><code>variables:\n  VERBOSE: \"true\"\n  DEBUG: \"1\"\n</code></pre>"},{"location":"gitlab-ci-cd/#migration-guide","title":"\ud83d\udd04 Migration Guide","text":""},{"location":"gitlab-ci-cd/#from-container-building-in-ci","title":"From Container Building in CI","text":"<p>Before: <pre><code>services:\n  - docker:dind\n\nbuild:\n  script:\n    - docker build -t myapp .\n</code></pre></p> <p>After: <pre><code># Build locally with podman/docker:\n# ./publish.sh v1.0.0\n\n# Then use in CI:\nimage: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n\nvalidate:\n  script:\n    - hadolint ContainerFile\n    - ./scripts/comprehensive-lint.sh\n</code></pre></p>"},{"location":"gitlab-ci-cd/#from-multiple-linter-jobs","title":"From Multiple Linter Jobs","text":"<p>Before: <pre><code>flake8:\n  image: python:3.9\n  script: flake8 .\n\neslint:\n  image: node:16\n  script: npx eslint .\n\nshellcheck:\n  image: koalaman/shellcheck\n  script: shellcheck *.sh\n</code></pre></p> <p>After: <pre><code>image: registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest\n\nlint:all:\n  script:\n    - ./scripts/comprehensive-lint.sh\n</code></pre></p>"},{"location":"gitlab-ci-cd/#benefits","title":"\ud83c\udf89 Benefits","text":"<ol> <li>No Container Building in CI - Uses pre-published images</li> <li>All Tools Pre-installed - No setup needed</li> <li>Consistent Environment - Same tools locally and in CI</li> <li>Fast Execution - No build step required</li> <li>Comprehensive Validation - All languages and configs covered</li> <li>Manual Publishing - Full control over image versions</li> </ol>"},{"location":"gitlab-ci-cd/#next-steps","title":"\ud83d\udcda Next Steps","text":"<ul> <li>Installation Guide - Setup and install HuskyCat</li> <li>Configuration - Configure validation rules</li> <li>Auto DevOps - Kubernetes validation</li> </ul>"},{"location":"installation/","title":"Installation Guide","text":"<p>This guide covers installing HuskyCat locally and in development projects.</p>"},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Container Runtime: Podman or Docker (required for all validation)</li> <li>Python 3.8+: For binary build and NPM mode</li> <li>UV Package Manager: <code>pip install uv</code></li> <li>Node.js and npm: Build system</li> <li>Git Repository: Required for hooks and staged file validation</li> </ul>"},{"location":"installation/#quick-start-huskycat-installation","title":"\ud83d\ude80 Quick Start - HuskyCat Installation","text":"<p>HuskyCat provides multiple installation methods to suit different workflows.</p>"},{"location":"installation/#method-1-build-from-source-recommended","title":"Method 1: Build from Source (Recommended)","text":"<pre><code># Clone and build HuskyCat\ngit clone &lt;repository&gt;\ncd huskycats-bates\nnpm install\n\n# Install Python dependencies\nuv sync --dev\n\n# Build container (required for all validation)\nnpm run container:build\n\n# Build binary entry point\nnpm run build:binary\n\n# Verify installation\n./dist/huskycat --version\n./dist/huskycat status\n</code></pre>"},{"location":"installation/#method-2-development-mode","title":"Method 2: Development Mode","text":"<pre><code># For active development on HuskyCat itself\nnpm run dev -- --help             # Show available commands\nnpm run validate                   # Validate current directory\nnpm run hooks:install              # Setup git hooks\nnpm run mcp:server                 # Start MCP server\n</code></pre>"},{"location":"installation/#using-huskycat-in-your-projects","title":"Using HuskyCat in Your Projects","text":""},{"location":"installation/#1-setup-git-hooks","title":"1. Setup Git Hooks","text":"<pre><code># Navigate to your project\ncd your-project\n\n# Setup HuskyCat git hooks\n./path/to/huskycat setup-hooks\n\n# Test the installation\ngit add .\ngit commit -m \"test: verify hooks\"  # Should run validation\n</code></pre>"},{"location":"installation/#2-validate-code","title":"2. Validate Code","text":"<pre><code># Validate current directory\n./path/to/huskycat validate\n\n# Validate specific files\n./path/to/huskycat validate src/main.py\n\n# Validate all files\n./path/to/huskycat validate --all\n\n# Validate only staged files\n./path/to/huskycat validate --staged\n</code></pre>"},{"location":"installation/#mcp-server-integration","title":"MCP Server Integration","text":""},{"location":"installation/#setup-mcp-for-claude-code","title":"Setup MCP for Claude Code","text":"<pre><code># Start MCP server for Claude Code integration\n./path/to/huskycat mcp-server\n\n# Test MCP server\n./path/to/huskycat mcp-server --port 8080\n\n# Configure in Claude Code MCP settings:\n# Command: /path/to/huskycat\n# Args: [\"mcp-server\", \"--port=0\"]\n</code></pre>"},{"location":"installation/#container-only-execution","title":"Container-Only Execution","text":"<p>All validation runs in containers for consistency and isolation:</p> <pre><code># Build validation container (required)\nnpm run container:build\n\n# Test container works\nnpm run container:test\n\n# All validation commands use container automatically\n./dist/huskycat validate --all    # Uses container internally\nnpm run validate                  # Uses container internally\n</code></pre>"},{"location":"installation/#what-gets-configured","title":"What Gets Configured","text":"<p>HuskyCat setup creates:</p> <pre><code>your-project/\n\u251c\u2500\u2500 .git/hooks/               # Git hooks installed by setup-hooks\n\u2502   \u251c\u2500\u2500 pre-commit           # Validates staged files\n\u2502   \u251c\u2500\u2500 pre-push             # Validates CI configuration  \n\u2502   \u2514\u2500\u2500 commit-msg           # Validates commit message format\n\u251c\u2500\u2500 .huskycat/               # Configuration and cache\n\u2502   \u251c\u2500\u2500 config.json         # HuskyCat configuration\n\u2502   \u2514\u2500\u2500 schemas/            # Downloaded validation schemas\n\u2514\u2500\u2500 (existing project files remain unchanged)\n</code></pre>"},{"location":"installation/#post-installation","title":"Post-Installation","text":""},{"location":"installation/#verify-installation","title":"Verify Installation","text":"<pre><code># Check HuskyCat status\n./dist/huskycat status\n\n# Test validation\n./dist/huskycat validate --all\n\n# Verify git hooks are working\ngit add .\ngit commit -m \"test: verify hooks\"  # Should run validation\n\n# Update validation schemas\n./dist/huskycat update-schemas\n</code></pre>"},{"location":"installation/#using-huskycat-commands","title":"Using HuskyCat Commands","text":"<p>After installation, you can use these commands:</p> <pre><code># Validate code\n./dist/huskycat validate                    # Validate current directory\n./dist/huskycat validate --staged          # Validate staged files\n./dist/huskycat validate src/main.py       # Validate specific file\n\n# CI/CD validation  \n./dist/huskycat ci-validate .gitlab-ci.yml # Validate GitLab CI\n\n# MCP integration\n./dist/huskycat mcp-server                  # Start MCP server\n\n# Management\n./dist/huskycat clean                       # Clean cache\n./dist/huskycat update-schemas              # Update schemas\n./dist/huskycat status                      # Show status\n</code></pre>"},{"location":"installation/#development-configuration","title":"Development Configuration","text":""},{"location":"installation/#configure-your-ide","title":"Configure Your IDE","text":""},{"location":"installation/#vs-code","title":"VS Code","text":"<p>Add to <code>.vscode/settings.json</code>: <pre><code>{\n  \"editor.formatOnSave\": true,\n  \"python.formatting.provider\": \"black\",\n  \"python.linting.enabled\": true,\n  \"python.linting.flake8Enabled\": true,\n  \"[python]\": {\n    \"editor.codeActionsOnSave\": {\n      \"source.organizeImports\": true\n    }\n  }\n}\n</code></pre></p>"},{"location":"installation/#pycharm","title":"PyCharm","text":"<ol> <li>Go to Settings \u2192 Tools \u2192 File Watchers</li> <li>Add watchers for Black and flake8</li> <li>Enable \"Reformat on Save\"</li> </ol>"},{"location":"installation/#update-packagejson-scripts","title":"Update package.json Scripts","text":"<p>Add these helpful scripts: <pre><code>{\n  \"scripts\": {\n    \"lint\": \"./scripts/comprehensive-lint.sh --all\",\n    \"lint:fix\": \"./scripts/comprehensive-lint.sh --all --fix\",\n    \"lint:staged\": \"./scripts/comprehensive-lint.sh --staged\",\n    \"prepare\": \"husky install\"\n  }\n}\n</code></pre></p>"},{"location":"installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/#architecture-issues","title":"Architecture Issues","text":"<ol> <li> <p>\"exec format error\" when running Docker <pre><code># This means architecture mismatch. Use the platform flag:\ndocker run --rm --platform linux/amd64 -v \"$(pwd):/workspace\" \\\n  registry.gitlab.com/jsullivan2_bates/pubcontainers/husky-lint:latest\n\n# Or use the install script which auto-detects:\ncurl -fsSL https://gitlab.com/jsullivan2_bates/pubcontainers/-/raw/main/install.sh | bash\n</code></pre></p> </li> <li> <p>Check your system architecture <pre><code># See what architecture you're running\nuname -m\n# x86_64 = use linux/amd64\n# arm64 or aarch64 = use linux/arm64\n\n# Check Docker image architecture\ndocker inspect registry.gitlab.com/bates-ils/projects/trustees-portal/sid-controller/huskycats-bates/husky-lint:latest | grep Architecture\n</code></pre></p> </li> </ol>"},{"location":"installation/#common-issues","title":"Common Issues","text":"<ol> <li>\"command not found\" errors</li> <li>Ensure tools are installed and in PATH</li> <li> <p>Try using full paths in scripts</p> </li> <li> <p>Permission denied</p> </li> <li>Make scripts executable: <code>chmod +x &lt;script&gt;</code></li> <li> <p>Check file permissions</p> </li> <li> <p>Python tools not found</p> </li> <li>Activate virtual environment</li> <li> <p>Install missing tools with pip</p> </li> <li> <p>Husky hooks not running</p> </li> <li>Run <code>npx husky install</code></li> <li>Check Git version (needs 2.9+)</li> <li>Ensure core.hooksPath is not set</li> </ol> <p>For additional support, see our GitLab Issues page.</p>"},{"location":"macos-code-signing/","title":"macOS Code Signing for HuskyCat Binaries","text":"<p>This guide covers setting up code signing for macOS binaries in GitLab CI/CD pipelines using PyInstaller.</p>"},{"location":"macos-code-signing/#overview","title":"Overview","text":"<p>HuskyCat supports automatic code signing for macOS binaries using Apple Developer certificates. This ensures:</p> <ul> <li>Gatekeeper Compatibility: Binaries run without security warnings</li> <li>Hardened Runtime: Enhanced security with proper entitlements</li> <li>Universal Binaries: Support for both Intel and Apple Silicon Macs</li> <li>CI/CD Integration: Automated signing in GitLab pipelines</li> </ul>"},{"location":"macos-code-signing/#prerequisites","title":"Prerequisites","text":""},{"location":"macos-code-signing/#1-apple-developer-account","title":"1. Apple Developer Account","text":"<p>You need an Apple Developer account with: - Developer ID Application Certificate: For distributing outside the Mac App Store - Team ID: Your Apple Developer Team identifier</p>"},{"location":"macos-code-signing/#2-certificate-export","title":"2. Certificate Export","text":"<ol> <li>Open Keychain Access on a Mac with your signing certificate</li> <li>Find your certificate: \"Developer ID Application: Your Name (TEAM_ID)\"</li> <li>Export as P12: Right-click \u2192 Export \u2192 <code>.p12</code> format</li> <li>Set a password: Choose a secure password for the .p12 file</li> </ol>"},{"location":"macos-code-signing/#3-gitlab-runner-setup","title":"3. GitLab Runner Setup","text":"<p>You need a GitLab Runner on macOS with: - Xcode Command Line Tools: <code>xcode-select --install</code> - Python 3.11+: For UV and PyInstaller - Runner Tag: <code>macos</code> (configured in <code>.gitlab-ci.yml</code>)</p>"},{"location":"macos-code-signing/#gitlab-cicd-variables-setup","title":"GitLab CI/CD Variables Setup","text":"<p>Configure these variables in your GitLab project's CI/CD settings:</p>"},{"location":"macos-code-signing/#required-variables","title":"Required Variables","text":"Variable Type Description Example <code>APPLE_SIGNING_IDENTITY</code> Variable Full certificate name <code>\"Developer ID Application: Your Name (ABCD123456)\"</code> <code>APPLE_TEAM_ID</code> Variable Apple Developer Team ID <code>ABCD123456</code> <code>APPLE_CERTIFICATE_P12_BASE64</code> Variable (Masked) Base64-encoded .p12 certificate <code>MIIK...</code> <code>APPLE_CERTIFICATE_PASSWORD</code> Variable (Masked) Password for .p12 certificate <code>your-cert-password</code> <code>KEYCHAIN_PASSWORD</code> Variable (Masked) Temporary keychain password <code>ci-keychain-pass</code>"},{"location":"macos-code-signing/#encoding-your-certificate","title":"Encoding Your Certificate","text":"<pre><code># Convert .p12 to base64 for GitLab variable\nbase64 -i your-certificate.p12 | pbcopy\n</code></pre>"},{"location":"macos-code-signing/#local-development","title":"Local Development","text":""},{"location":"macos-code-signing/#building-signed-binaries-locally","title":"Building Signed Binaries Locally","text":"<pre><code># Set your signing identity\nexport APPLE_SIGNING_IDENTITY=\"Developer ID Application: Your Name (TEAM_ID)\"\n\n# Build signed binary with entitlements\nnpm run build:binary:signed\n\n# Or use the build script directly\nuv run python build_binary.py \\\n  --codesign-identity \"$APPLE_SIGNING_IDENTITY\" \\\n  --entitlements-file entitlements.plist \\\n  --target-arch universal2 \\\n  --skip-upx\n</code></pre>"},{"location":"macos-code-signing/#testing-unsigned-binaries","title":"Testing Unsigned Binaries","text":"<pre><code># Build without signing (for testing)\nnpm run build:binary -- --skip-upx --target-arch universal2\n\n# Test the binary\n./dist/huskycat --version\n</code></pre>"},{"location":"macos-code-signing/#entitlements-configuration","title":"Entitlements Configuration","text":"<p>The <code>entitlements.plist</code> file defines permissions for the signed binary:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;!-- Allow executing binaries and scripts --&gt;\n    &lt;key&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow loading of arbitrary libraries --&gt;\n    &lt;key&gt;com.apple.security.cs.disable-library-validation&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow network access for downloading schemas --&gt;\n    &lt;key&gt;com.apple.security.network.client&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow file system access for validation tools --&gt;\n    &lt;key&gt;com.apple.security.files.user-selected.read-write&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Required for PyInstaller binaries --&gt;\n    &lt;key&gt;com.apple.security.cs.disable-executable-page-protection&lt;/key&gt;\n    &lt;true/&gt;\n\n    &lt;!-- Allow runtime code execution (Python bytecode) --&gt;\n    &lt;key&gt;com.apple.security.cs.allow-dyld-environment-variables&lt;/key&gt;\n    &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>"},{"location":"macos-code-signing/#key-entitlements-explained","title":"Key Entitlements Explained","text":"<ul> <li><code>allow-unsigned-executable-memory</code>: Allows PyInstaller to execute Python bytecode</li> <li><code>disable-library-validation</code>: Permits loading of validation tool libraries  </li> <li><code>network.client</code>: Enables downloading of validation schemas</li> <li><code>files.user-selected.read-write</code>: Allows validation of user files</li> <li><code>disable-executable-page-protection</code>: Required for PyInstaller executables</li> </ul>"},{"location":"macos-code-signing/#gitlab-ci-pipeline","title":"GitLab CI Pipeline","text":"<p>The macOS build job in <code>.gitlab-ci.yml</code>:</p> <pre><code>binary:build:macos:\n  stage: package\n  tags: \n    - macos  # Requires macOS runner\n  variables:\n    APPLE_SIGNING_IDENTITY: $APPLE_SIGNING_IDENTITY\n    APPLE_TEAM_ID: $APPLE_TEAM_ID\n  before_script:\n    # Setup Python environment\n    - curl -LsSf https://astral.sh/uv/install.sh | sh\n    - export PATH=\"$HOME/.local/bin:$PATH\"\n    - uv sync --extra build\n\n    # Import signing certificate\n    - |\n      if [ -n \"$APPLE_CERTIFICATE_P12_BASE64\" ]; then\n        echo \"\ud83d\udd10 Importing signing certificate...\"\n        echo \"$APPLE_CERTIFICATE_P12_BASE64\" | base64 -D &gt; certificate.p12\n        security create-keychain -p \"$KEYCHAIN_PASSWORD\" ci.keychain\n        security import certificate.p12 -k ci.keychain -P \"$APPLE_CERTIFICATE_PASSWORD\" -A\n        rm certificate.p12\n      fi\n  script:\n    # Build signed binary\n    - |\n      uv run python build_binary.py \\\n        --codesign-identity \"$APPLE_SIGNING_IDENTITY\" \\\n        --entitlements-file entitlements.plist \\\n        --target-arch universal2 \\\n        --skip-upx\n</code></pre>"},{"location":"macos-code-signing/#verification-commands","title":"Verification Commands","text":""},{"location":"macos-code-signing/#check-code-signing-status","title":"Check Code Signing Status","text":"<pre><code># Verify signature\ncodesign -dv dist/huskycat\n\n# Check entitlements\ncodesign -d --entitlements - dist/huskycat\n\n# Test Gatekeeper compatibility\nspctl -a -t exec -vv dist/huskycat\n</code></pre>"},{"location":"macos-code-signing/#binary-architecture","title":"Binary Architecture","text":"<pre><code># Check universal binary\nfile dist/huskycat\n# Output: Mach-O universal binary with 2 architectures: [x86_64:Mach-O 64-bit executable x86_64] [arm64:Mach-O 64-bit executable arm64]\n\n# Test on different architectures\narch -x86_64 ./dist/huskycat --version  # Intel\narch -arm64 ./dist/huskycat --version   # Apple Silicon\n</code></pre>"},{"location":"macos-code-signing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"macos-code-signing/#common-issues","title":"Common Issues","text":""},{"location":"macos-code-signing/#1-binary-killed-by-macos","title":"1. \"Binary Killed by macOS\"","text":"<p>Cause: Unsigned binary with hardened runtime Solution: Either sign the binary or build without UPX compression</p> <pre><code># Rebuild without UPX\nnpm run build:binary -- --skip-upx\n</code></pre>"},{"location":"macos-code-signing/#2-code-sign-error-identity-not-found","title":"2. \"Code Sign Error: Identity Not Found\"","text":"<p>Cause: Certificate not properly imported Solution: Verify certificate installation</p> <pre><code>security find-identity -v -p codesigning\n</code></pre>"},{"location":"macos-code-signing/#3-gatekeeper-blocks-binary","title":"3. \"Gatekeeper Blocks Binary\"","text":"<p>Cause: Invalid signature or entitlements Solution: Check signature and entitlements</p> <pre><code>codesign -dv dist/huskycat\ncodesign --verify --verbose dist/huskycat\n</code></pre>"},{"location":"macos-code-signing/#4-pyinstaller-import-errors","title":"4. \"PyInstaller Import Errors\"","text":"<p>Cause: Missing entitlements for dynamic loading Solution: Ensure entitlements include: - <code>com.apple.security.cs.disable-library-validation</code> - <code>com.apple.security.cs.allow-unsigned-executable-memory</code></p>"},{"location":"macos-code-signing/#debug-mode","title":"Debug Mode","text":"<p>Build with verbose signing output:</p> <pre><code>uv run python build_binary.py \\\n  --codesign-identity \"$APPLE_SIGNING_IDENTITY\" \\\n  --entitlements-file entitlements.plist \\\n  --target-arch universal2 \\\n  --skip-upx \\\n  --verbose\n</code></pre>"},{"location":"macos-code-signing/#security-considerations","title":"Security Considerations","text":""},{"location":"macos-code-signing/#certificate-security","title":"Certificate Security","text":"<ul> <li>Never commit certificates: Use GitLab CI/CD variables (masked)</li> <li>Rotate regularly: Update certificates before expiration</li> <li>Limit access: Restrict who can modify CI/CD variables</li> <li>Temporary keychains: Always clean up in CI <code>after_script</code></li> </ul>"},{"location":"macos-code-signing/#entitlements","title":"Entitlements","text":"<ul> <li>Minimal permissions: Only include required entitlements</li> <li>Regular review: Audit entitlements for security implications</li> <li>Testing: Verify binary works with minimal entitlements</li> </ul>"},{"location":"macos-code-signing/#distribution","title":"Distribution","text":"<ul> <li>Notarization: Consider Apple notarization for additional trust</li> <li>Checksums: Provide SHA256 checksums for distributed binaries</li> <li>HTTPS only: Distribute binaries over secure channels</li> </ul>"},{"location":"macos-code-signing/#resources","title":"Resources","text":"<ul> <li>Apple Code Signing Guide</li> <li>PyInstaller macOS Guide</li> <li>GitLab CI macOS Runners</li> <li>Hardened Runtime Entitlements</li> </ul>"},{"location":"mcp-architecture/","title":"HuskyCats MCP Server Architecture v2.0.0","text":""},{"location":"mcp-architecture/#executive-summary","title":"Executive Summary","text":"<p>This document outlines the comprehensive system architecture for the HuskyCats MCP (Model Context Protocol) Server v2.0.0, designed for production-grade code validation services with enterprise security, scalability, and maintainability requirements.</p>"},{"location":"mcp-architecture/#system-overview","title":"System Overview","text":"<p>The HuskyCats MCP Server provides a secure, scalable platform for AI-powered code validation, supporting multiple deployment modes from local development to production Kubernetes clusters.</p>"},{"location":"mcp-architecture/#key-architectural-principles","title":"Key Architectural Principles","text":"<ul> <li>Security First: Rocky Linux 10 base with hardening</li> <li>Cloud Native: Kubernetes-ready with horizontal autoscaling</li> <li>Modern TypeScript: No compilation, tsx execution, fat arrows</li> <li>Zero Trust: Authentication, authorization, and audit trails</li> <li>Filesystem Sync: Real-time repository synchronization</li> <li>Container Native: Podman/Docker compatible with multi-stage builds</li> </ul>"},{"location":"mcp-architecture/#architecture-diagram","title":"Architecture Diagram","text":"<pre><code>graph TB\n    subgraph \"Client Layer\"\n        A[Claude Desktop] --&gt; B[MCP Client]\n        C[VS Code] --&gt; B\n        D[API Clients] --&gt; B\n    end\n\n    subgraph \"Load Balancer &amp; Ingress\"\n        B --&gt; E[Kubernetes Ingress]\n        E --&gt; F[Service Mesh]\n    end\n\n    subgraph \"Application Layer\"\n        F --&gt; G[MCP Server Pod 1]\n        F --&gt; H[MCP Server Pod 2]\n        F --&gt; I[MCP Server Pod N]\n\n        subgraph \"MCP Server Pod\"\n            G --&gt; J[HTTP Server]\n            J --&gt; K[RPC Handler]\n            J --&gt; L[Tools Handler]\n            J --&gt; M[Resources Handler]\n            J --&gt; N[Health Handler]\n\n            K --&gt; O[Tool Executor]\n            L --&gt; P[Validation Tools]\n            M --&gt; Q[Syncthing Client]\n        end\n    end\n\n    subgraph \"Storage Layer\"\n        Q --&gt; R[Syncthing Network]\n        R --&gt; S[User Repositories]\n        T[Persistent Volumes] --&gt; G\n        T --&gt; H\n        T --&gt; I\n    end\n\n    subgraph \"Security &amp; Monitoring\"\n        U[fail2ban] --&gt; G\n        V[firewalld] --&gt; G\n        W[Prometheus] --&gt; G\n        X[Grafana] --&gt; W\n        Y[Loki] --&gt; G\n    end\n\n    subgraph \"Container Registry\"\n        Z[GHCR] --&gt; AA[Rocky Linux Images]\n        Z --&gt; BB[Alpine Images]\n    end</code></pre>"},{"location":"mcp-architecture/#component-architecture","title":"Component Architecture","text":""},{"location":"mcp-architecture/#1-container-architecture","title":"1. Container Architecture","text":""},{"location":"mcp-architecture/#multi-stage-container-build","title":"Multi-Stage Container Build","text":"<pre><code># Stage 1: Node.js tools\nFROM node:20-alpine AS node-builder\nRUN npm install -g eslint prettier tsx\n\n# Stage 2: Python tools  \nFROM python:3.11-alpine AS python-builder\nRUN pip install black flake8 mypy pylint\n\n# Stage 3: Rocky Linux production\nFROM rockylinux/rockylinux:9 AS production\nCOPY --from=node-builder /usr/local /usr/local\nCOPY --from=python-builder /usr/local /usr/local\n</code></pre>"},{"location":"mcp-architecture/#security-hardening","title":"Security Hardening","text":"<ul> <li>Non-root execution: UID 1001 (mcp-server)</li> <li>Read-only filesystem: Except for /tmp and /workspace</li> <li>Minimal attack surface: Only required packages</li> <li>fail2ban integration: Automated threat response</li> <li>firewalld rules: Port-specific access control</li> <li>SSH hardening: Key-based auth only, no root login</li> </ul>"},{"location":"mcp-architecture/#2-application-architecture","title":"2. Application Architecture","text":""},{"location":"mcp-architecture/#server-core-srcserverts","title":"Server Core (<code>src/server.ts</code>)","text":"<pre><code>// Modern ES modules with top-level await\nimport { createServer } from 'http';\n\nconst server = createServer(handleRequest);\n\n// Fat arrow request handler\nconst handleRequest = async (req: IncomingMessage, res: ServerResponse) =&gt; {\n  // Route to specialized handlers\n  switch (url) {\n    case '/health': await handleHealth(req, res); break;\n    case '/tools': await handleTools(req, res); break;\n    case '/rpc': await handleRPC(req, res); break;\n    case '/pairing': await handlePairing(req, res); break;\n  }\n};\n</code></pre>"},{"location":"mcp-architecture/#mcp-protocol-implementation","title":"MCP Protocol Implementation","text":"<ul> <li>JSON-RPC 2.0: Standard protocol compliance</li> <li>HTTP Transport: RESTful with RPC endpoint</li> <li>Session Management: Persistent connections with cleanup</li> <li>Capabilities Negotiation: Dynamic feature enablement</li> <li>Real-time Notifications: WebSocket-like behavior over HTTP</li> </ul>"},{"location":"mcp-architecture/#handler-architecture","title":"Handler Architecture","text":"<pre><code>src/handlers/\n\u251c\u2500\u2500 health.ts      # Kubernetes health probes\n\u251c\u2500\u2500 tools.ts       # Tool discovery and execution  \n\u251c\u2500\u2500 rpc.ts         # MCP protocol implementation\n\u251c\u2500\u2500 resources.ts   # File system access\n\u251c\u2500\u2500 prompts.ts     # Validation workflows\n\u2514\u2500\u2500 hooks.ts       # Claude Code integration\n</code></pre>"},{"location":"mcp-architecture/#3-security-architecture","title":"3. Security Architecture","text":""},{"location":"mcp-architecture/#multi-layer-security-model","title":"Multi-Layer Security Model","text":"<ol> <li>Container Security</li> <li>Rocky Linux 10 hardened base</li> <li>Non-root execution (UID 1001)</li> <li>Read-only root filesystem</li> <li>Resource limits (CPU: 500m, Memory: 512Mi)</li> <li> <p>Security contexts with dropped capabilities</p> </li> <li> <p>Network Security <pre><code># fail2ban configuration\n[mcp-server]\nenabled = true\nmaxretry = 5\nbantime = 3600\nfindtime = 600\n\n# firewalld rules\nports: 8080/tcp, 8384/tcp, 22000/tcp, 21027/udp\n</code></pre></p> </li> <li> <p>Authentication &amp; Authorization</p> </li> <li>Bearer token authentication</li> <li>Session-based access control</li> <li>User isolation with volume keying</li> <li> <p>API rate limiting</p> </li> <li> <p>File System Security</p> </li> <li>User-isolated workspaces</li> <li>Syncthing receive-only mode</li> <li>SELinux contexts (<code>:z</code> volumes)</li> <li>Temporary file cleanup</li> </ol>"},{"location":"mcp-architecture/#4-syncthing-integration-architecture","title":"4. Syncthing Integration Architecture","text":""},{"location":"mcp-architecture/#repository-synchronization-flow","title":"Repository Synchronization Flow","text":"<pre><code>sequenceDiagram\n    participant C as Client\n    participant S as MCP Server\n    participant ST as Syncthing\n    participant R as Repository\n\n    C-&gt;&gt;S: POST /pairing/generate\n    S-&gt;&gt;ST: Generate device ID\n    ST-&gt;&gt;S: Return pairing code\n    S-&gt;&gt;C: Return pairing code\n\n    C-&gt;&gt;ST: Add device with code\n    ST-&gt;&gt;ST: Establish connection\n    ST-&gt;&gt;R: Sync repository files\n\n    S-&gt;&gt;ST: Monitor sync status\n    S-&gt;&gt;C: Notify sync complete\n    C-&gt;&gt;S: Access synced files via Resources API</code></pre>"},{"location":"mcp-architecture/#syncthing-configuration","title":"Syncthing Configuration","text":"<pre><code>&lt;configuration&gt;\n    &lt;device id=\"server-device-id\" name=\"MCP Server\"/&gt;\n    &lt;folder id=\"user-repo\" path=\"/mnt/repos/user-repo\" type=\"receiveonly\"&gt;\n        &lt;device id=\"client-device-id\"/&gt;\n    &lt;/folder&gt;\n&lt;/configuration&gt;\n</code></pre>"},{"location":"mcp-architecture/#5-kubernetes-architecture","title":"5. Kubernetes Architecture","text":""},{"location":"mcp-architecture/#deployment-strategy","title":"Deployment Strategy","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nspec:\n  replicas: 2\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxSurge: 1\n      maxUnavailable: 0\n</code></pre>"},{"location":"mcp-architecture/#horizontal-pod-autoscaling","title":"Horizontal Pod Autoscaling","text":"<pre><code>apiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nspec:\n  minReplicas: 2\n  maxReplicas: 10\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: 80\n</code></pre>"},{"location":"mcp-architecture/#service-mesh-integration","title":"Service Mesh Integration","text":"<ul> <li>Ingress Controller: NGINX or Istio</li> <li>Load Balancing: Round-robin with health checks</li> <li>TLS Termination: Automatic certificate management</li> <li>Traffic Policies: Rate limiting and circuit breakers</li> </ul>"},{"location":"mcp-architecture/#6-monitoring-observability","title":"6. Monitoring &amp; Observability","text":""},{"location":"mcp-architecture/#metrics-collection","title":"Metrics Collection","text":"<pre><code>// Prometheus metrics\nconst metrics = {\n  'mcp_server_uptime': process.uptime(),\n  'mcp_server_memory_usage': process.memoryUsage().heapUsed,\n  'mcp_tool_execution_duration': executionTime,\n  'mcp_api_requests_total': requestCount,\n  'mcp_api_errors_total': errorCount\n};\n</code></pre>"},{"location":"mcp-architecture/#health-checks","title":"Health Checks","text":"<pre><code>livenessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 10\n  periodSeconds: 10\n\nreadinessProbe:\n  httpGet:\n    path: /health\n    port: 8080\n  initialDelaySeconds: 5\n  periodSeconds: 5\n</code></pre>"},{"location":"mcp-architecture/#logging-strategy","title":"Logging Strategy","text":"<ul> <li>Structured Logging: JSON format with context</li> <li>Log Aggregation: Fluentd/Fluent Bit to Loki</li> <li>Security Logs: fail2ban events to SIEM</li> <li>Audit Trails: User actions and API calls</li> </ul>"},{"location":"mcp-architecture/#validation-tools-architecture","title":"Validation Tools Architecture","text":""},{"location":"mcp-architecture/#tool-categories-implementation","title":"Tool Categories &amp; Implementation","text":""},{"location":"mcp-architecture/#python-tools","title":"Python Tools","text":"<pre><code>const pythonTools = [\n  { name: 'python-black', command: 'black', category: 'formatter' },\n  { name: 'python-flake8', command: 'flake8', category: 'linter' },\n  { name: 'python-mypy', command: 'mypy', category: 'type-checker' },\n  { name: 'python-bandit', command: 'bandit', category: 'security' }\n];\n</code></pre>"},{"location":"mcp-architecture/#javascripttypescript-tools","title":"JavaScript/TypeScript Tools","text":"<pre><code>const jsTools = [\n  { name: 'js-eslint', command: 'eslint', category: 'linter' },\n  { name: 'js-prettier', command: 'prettier', category: 'formatter' }\n];\n</code></pre>"},{"location":"mcp-architecture/#infrastructure-tools","title":"Infrastructure Tools","text":"<pre><code>const infraTools = [\n  { name: 'shell-shellcheck', command: 'shellcheck', category: 'linter' },\n  { name: 'docker-hadolint', command: 'hadolint', category: 'linter' },\n  { name: 'yaml-yamllint', command: 'yamllint', category: 'linter' },\n  { name: 'gitlab-ci-validate', command: 'python3', category: 'validator' }\n];\n</code></pre>"},{"location":"mcp-architecture/#tool-execution-architecture","title":"Tool Execution Architecture","text":""},{"location":"mcp-architecture/#containerized-execution","title":"Containerized Execution","text":"<pre><code>class ToolExecutor {\n  async execute(command: string, args: string[], options: ExecutionOptions) {\n    if (this.useContainer) {\n      return this.executeInContainer(command, args, options);\n    }\n    return this.executeNative(command, args, options);\n  }\n\n  private async executeInContainer(command: string, args: string[], options: ExecutionOptions) {\n    const containerArgs = [\n      'run', '--rm',\n      '--security-opt', 'no-new-privileges:true',\n      '--cap-drop', 'ALL',\n      '--read-only',\n      '--tmpfs', '/tmp:size=100M,noexec',\n      '-v', `${options.workdir}:/workspace:ro,z`,\n      'huskycats/validator:latest',\n      command, ...args\n    ];\n\n    return this.spawn(this.containerRuntime, containerArgs);\n  }\n}\n</code></pre>"},{"location":"mcp-architecture/#api-design","title":"API Design","text":""},{"location":"mcp-architecture/#restful-endpoints","title":"RESTful Endpoints","text":"<pre><code>// Health and metrics\nGET  /health              -&gt; Health status\nGET  /metrics             -&gt; Prometheus metrics\nGET  /tools               -&gt; Available tools list\n\n// MCP Protocol\nPOST /rpc                 -&gt; JSON-RPC 2.0 endpoint\n\n// Syncthing integration  \nPOST /pairing/generate    -&gt; Generate pairing code\nPOST /pairing/process     -&gt; Process pairing code\n</code></pre>"},{"location":"mcp-architecture/#mcp-protocol-methods","title":"MCP Protocol Methods","text":"<pre><code>// Core MCP methods\n\"initialize\"              -&gt; Session initialization\n\"tools/list\"             -&gt; List available tools\n\"tools/call\"             -&gt; Execute validation tool\n\"resources/list\"         -&gt; List file resources\n\"resources/read\"         -&gt; Read file content\n\"resources/subscribe\"    -&gt; Subscribe to file changes\n\"prompts/list\"           -&gt; List workflow templates\n\"prompts/get\"            -&gt; Get prompt details\n\"logging/setLevel\"       -&gt; Configure logging\n</code></pre>"},{"location":"mcp-architecture/#authentication-flow","title":"Authentication Flow","text":"<pre><code>sequenceDiagram\n    participant C as Client\n    participant S as MCP Server\n    participant A as Auth Service\n\n    C-&gt;&gt;S: Request with Bearer token\n    S-&gt;&gt;A: Validate token\n    A-&gt;&gt;S: Token valid + user context\n    S-&gt;&gt;S: Initialize session\n    S-&gt;&gt;C: Session established\n\n    Note over C,S: Subsequent requests use session\n    C-&gt;&gt;S: MCP requests with session ID\n    S-&gt;&gt;C: Responses with session context</code></pre>"},{"location":"mcp-architecture/#data-models","title":"Data Models","text":""},{"location":"mcp-architecture/#mcp-protocol-types","title":"MCP Protocol Types","text":"<pre><code>interface MCPRequest {\n  jsonrpc: '2.0';\n  id: string | number;\n  method: string;\n  params?: any;\n}\n\ninterface MCPResponse {\n  jsonrpc: '2.0';\n  id: string | number;\n  result?: any;\n  error?: MCPError;\n}\n\ninterface MCPServerCapabilities {\n  tools: { listChanged: boolean };\n  resources: { subscribe: boolean; listChanged: boolean };\n  prompts: { listChanged: boolean };\n  logging: { level: string };\n}\n</code></pre>"},{"location":"mcp-architecture/#tool-definition-schema","title":"Tool Definition Schema","text":"<pre><code>interface ValidationTool {\n  name: string;\n  description: string;\n  command: string;\n  args?: string[];\n  category: 'linter' | 'formatter' | 'type-checker' | 'security' | 'validator';\n  filePatterns?: string[];\n  supportsFix?: boolean;\n  containerImage?: string;\n}\n</code></pre>"},{"location":"mcp-architecture/#resource-schema","title":"Resource Schema","text":"<pre><code>interface MCPResource {\n  uri: string;\n  name: string;\n  description?: string;\n  mimeType?: string;\n  metadata?: {\n    userId: string;\n    syncStatus: 'synced' | 'syncing' | 'error';\n    lastModified: string;\n  };\n}\n</code></pre>"},{"location":"mcp-architecture/#deployment-strategies","title":"Deployment Strategies","text":""},{"location":"mcp-architecture/#local-development","title":"Local Development","text":"<pre><code># Direct TypeScript execution\nnpm install\nnpm run dev\n\n# Container development\npodman build -f ContainerFile -t huskycats-dev .\npodman run -p 8080:8080 huskycats-dev\n</code></pre>"},{"location":"mcp-architecture/#production-deployment","title":"Production Deployment","text":""},{"location":"mcp-architecture/#container-registry-strategy","title":"Container Registry Strategy","text":"<pre><code># Multi-architecture builds\npodman build --platform linux/amd64,linux/arm64 \\\n  -f ContainerFile.rocky \\\n  -t ghcr.io/huskycats/mcp-server:rocky .\n\npodman push ghcr.io/huskycats/mcp-server:rocky\n</code></pre>"},{"location":"mcp-architecture/#kubernetes-deployment","title":"Kubernetes Deployment","text":"<pre><code># Apply manifests\nkubectl apply -f config/k8s/\n\n# Verify deployment\nkubectl get pods -l app=huskycats-mcp\nkubectl get hpa huskycats-mcp-server\n</code></pre>"},{"location":"mcp-architecture/#production-configuration","title":"Production Configuration","text":"<pre><code># Environment variables\nMCP_AUTH_TOKEN: ${SECRET_AUTH_TOKEN}\nENABLE_SYNCTHING: \"true\"\nNODE_ENV: \"production\"\nCORS_ORIGIN: \"https://claude.ai\"\n</code></pre>"},{"location":"mcp-architecture/#performance-optimization","title":"Performance Optimization","text":""},{"location":"mcp-architecture/#resource-management","title":"Resource Management","text":"<ul> <li>CPU Limits: 500m per pod</li> <li>Memory Limits: 512Mi per pod</li> <li>Horizontal Scaling: 2-10 pods based on load</li> <li>Tool Execution: Containerized with resource limits</li> </ul>"},{"location":"mcp-architecture/#caching-strategy","title":"Caching Strategy","text":"<ul> <li>Tool Results: In-memory cache with TTL</li> <li>File Content: Redis cache for large files  </li> <li>Session Data: Memory store with persistence</li> <li>Container Images: Pre-pulled on nodes</li> </ul>"},{"location":"mcp-architecture/#network-optimization","title":"Network Optimization","text":"<ul> <li>HTTP/2: Multiplexed connections</li> <li>Compression: gzip for API responses</li> <li>CDN: Static asset delivery</li> <li>Connection Pooling: Syncthing client connections</li> </ul>"},{"location":"mcp-architecture/#security-considerations","title":"Security Considerations","text":""},{"location":"mcp-architecture/#threat-model","title":"Threat Model","text":"<ol> <li>Unauthorized Access: Mitigated by bearer token auth</li> <li>Code Injection: Mitigated by containerized execution</li> <li>Resource Exhaustion: Mitigated by resource limits</li> <li>Data Exfiltration: Mitigated by user isolation</li> <li>Network Attacks: Mitigated by fail2ban/firewalld</li> </ol>"},{"location":"mcp-architecture/#security-controls","title":"Security Controls","text":"<ul> <li>Authentication: Bearer token with expiration</li> <li>Authorization: Role-based access control</li> <li>Encryption: TLS 1.3 for all communications</li> <li>Audit Logging: All API calls and tool executions</li> <li>Vulnerability Scanning: Container image scanning</li> <li>Secrets Management: Kubernetes secrets with rotation</li> </ul>"},{"location":"mcp-architecture/#disaster-recovery","title":"Disaster Recovery","text":""},{"location":"mcp-architecture/#backup-strategy","title":"Backup Strategy","text":"<ul> <li>Configuration: GitOps with version control</li> <li>User Data: Syncthing peer redundancy</li> <li>Logs: Centralized logging with retention</li> <li>Metrics: Long-term storage in Prometheus</li> </ul>"},{"location":"mcp-architecture/#recovery-procedures","title":"Recovery Procedures","text":"<ol> <li>Pod Failure: Automatic restart by Kubernetes</li> <li>Node Failure: Automatic rescheduling</li> <li>Cluster Failure: Multi-region deployment</li> <li>Data Loss: Restore from Syncthing peers</li> </ol>"},{"location":"mcp-architecture/#future-enhancements","title":"Future Enhancements","text":""},{"location":"mcp-architecture/#planned-features","title":"Planned Features","text":"<ul> <li>WebSocket Support: Real-time bidirectional communication</li> <li>Plugin System: Custom tool integrations</li> <li>AI Code Suggestions: Integration with code LLMs</li> <li>Team Collaboration: Shared validation workspaces</li> <li>Custom Rules: User-defined validation rules</li> </ul>"},{"location":"mcp-architecture/#scalability-roadmap","title":"Scalability Roadmap","text":"<ul> <li>Multi-cluster: Federation across regions</li> <li>Edge Deployment: CDN-like code validation</li> <li>Serverless: Function-as-a-Service for tools</li> <li>Stream Processing: Real-time code quality metrics</li> </ul>"},{"location":"mcp-architecture/#conclusion","title":"Conclusion","text":"<p>The HuskyCats MCP Server v2.0.0 architecture provides a robust, secure, and scalable foundation for AI-powered code validation. The combination of modern TypeScript development, container-native deployment, and enterprise security features makes it suitable for both individual developers and large organizations.</p> <p>The architecture emphasizes: - Developer Experience: Zero-compilation TypeScript with tsx - Security: Multi-layer defense with hardened containers - Scalability: Kubernetes-native with horizontal autoscaling - Integration: Seamless Claude Desktop and API integration - Maintainability: Clean separation of concerns and modern patterns</p> <p>This design supports the full spectrum of deployment scenarios while maintaining consistent functionality and security across all environments.</p>"},{"location":"mcp-tool-api/","title":"HuskyCats MCP Server - Tool API Documentation","text":""},{"location":"mcp-tool-api/#overview","title":"Overview","text":"<p>The HuskyCats MCP Server provides a comprehensive set of validation and code quality tools accessible via the Model Context Protocol (MCP). This document details all available tools, their parameters, and usage examples for IDE and agent integration.</p>"},{"location":"mcp-tool-api/#connection-configuration","title":"Connection Configuration","text":""},{"location":"mcp-tool-api/#stdio-mode-local","title":"Stdio Mode (Local)","text":"<pre><code>{\n  \"mcpServers\": {\n    \"huskycats-validator\": {\n      \"command\": \"node\",\n      \"args\": [\"mcp-server/dist/index.js\"],\n      \"type\": \"stdio\",\n      \"env\": {\n        \"NODE_ENV\": \"production\",\n        \"MCP_PORT\": \"8080\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#http-mode-remote","title":"HTTP Mode (Remote)","text":"<pre><code>{\n  \"mcpServers\": {\n    \"huskycats-http\": {\n      \"url\": \"http://localhost:8080/rpc\",\n      \"type\": \"http\",\n      \"authentication\": {\n        \"type\": \"bearer\",\n        \"token\": \"YOUR_AUTH_TOKEN\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#mcp-protocol-methods","title":"MCP Protocol Methods","text":""},{"location":"mcp-tool-api/#1-initialize-session","title":"1. Initialize Session","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"initialize\",\n  \"params\": {\n    \"protocolVersion\": \"2024-11-05\",\n    \"capabilities\": {},\n    \"clientInfo\": {\n      \"name\": \"your-client\",\n      \"version\": \"1.0.0\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#2-list-available-tools","title":"2. List Available Tools","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 2,\n  \"method\": \"tools/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#3-call-a-tool","title":"3. Call a Tool","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 3,\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"tool-name\",\n    \"arguments\": {\n      // Tool-specific arguments\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#available-tools","title":"Available Tools","text":""},{"location":"mcp-tool-api/#python-validation-tools","title":"Python Validation Tools","text":""},{"location":"mcp-tool-api/#python-black","title":"python-black","text":"<p>Format Python code using Black formatter.</p> <p>Parameters: - <code>files</code> (array, required): Python files to format - <code>fix</code> (boolean, optional): Apply fixes automatically (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"python-black\",\n  \"arguments\": {\n    \"files\": [\"src/main.py\", \"src/utils.py\"],\n    \"fix\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#python-flake8","title":"python-flake8","text":"<p>Lint Python code for style and errors.</p> <p>Parameters: - <code>files</code> (array, required): Python files to lint</p> <p>Example: <pre><code>{\n  \"name\": \"python-flake8\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.py\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#python-mypy","title":"python-mypy","text":"<p>Type check Python code.</p> <p>Parameters: - <code>files</code> (array, required): Python files to type check</p> <p>Example: <pre><code>{\n  \"name\": \"python-mypy\",\n  \"arguments\": {\n    \"files\": [\"src/models.py\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#python-bandit","title":"python-bandit","text":"<p>Security linter for Python.</p> <p>Parameters: - <code>files</code> (array, required): Python files to scan for security issues</p> <p>Example: <pre><code>{\n  \"name\": \"python-bandit\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.py\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#javascripttypescript-tools","title":"JavaScript/TypeScript Tools","text":""},{"location":"mcp-tool-api/#js-eslint","title":"js-eslint","text":"<p>Lint JavaScript/TypeScript code.</p> <p>Parameters: - <code>files</code> (array, required): JS/TS files to lint - <code>fix</code> (boolean, optional): Apply fixes automatically (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"js-eslint\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.ts\", \"src/**/*.tsx\"],\n    \"fix\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#js-prettier","title":"js-prettier","text":"<p>Format JavaScript/TypeScript code.</p> <p>Parameters: - <code>files</code> (array, required): JS/TS files to format - <code>fix</code> (boolean, optional): Apply formatting automatically (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"js-prettier\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.js\"],\n    \"fix\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#shell-script-tools","title":"Shell Script Tools","text":""},{"location":"mcp-tool-api/#shell-shellcheck","title":"shell-shellcheck","text":"<p>Lint shell scripts.</p> <p>Parameters: - <code>files</code> (array, required): Shell scripts to lint</p> <p>Example: <pre><code>{\n  \"name\": \"shell-shellcheck\",\n  \"arguments\": {\n    \"files\": [\"scripts/*.sh\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#docker-tools","title":"Docker Tools","text":""},{"location":"mcp-tool-api/#docker-hadolint","title":"docker-hadolint","text":"<p>Lint Dockerfiles.</p> <p>Parameters: - <code>files</code> (array, required): Dockerfiles to lint</p> <p>Example: <pre><code>{\n  \"name\": \"docker-hadolint\",\n  \"arguments\": {\n    \"files\": [\"Dockerfile\", \"ContainerFile\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#yaml-tools","title":"YAML Tools","text":""},{"location":"mcp-tool-api/#yaml-yamllint","title":"yaml-yamllint","text":"<p>Lint YAML files.</p> <p>Parameters: - <code>files</code> (array, required): YAML files to lint</p> <p>Example: <pre><code>{\n  \"name\": \"yaml-yamllint\",\n  \"arguments\": {\n    \"files\": [\"**/*.yml\", \"**/*.yaml\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#gitlab-ci-tools","title":"GitLab CI Tools","text":""},{"location":"mcp-tool-api/#gitlab-ci-validate","title":"gitlab-ci-validate","text":"<p>Validate GitLab CI configuration.</p> <p>Parameters: - <code>files</code> (array, required): GitLab CI files to validate</p> <p>Example: <pre><code>{\n  \"name\": \"gitlab-ci-validate\",\n  \"arguments\": {\n    \"files\": [\".gitlab-ci.yml\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#project-wide-tools","title":"Project-Wide Tools","text":""},{"location":"mcp-tool-api/#validate_project","title":"validate_project","text":"<p>Validate entire project with all applicable tools.</p> <p>Parameters: - <code>directory</code> (string, optional): Project directory to validate (default: \".\") - <code>exclude</code> (array, optional): Patterns to exclude (default: [\"node_modules/\", \".git/\", \"dist/**\"]) - <code>parallel</code> (boolean, optional): Run validations in parallel (default: true) - <code>fixIssues</code> (boolean, optional): Automatically fix issues where possible (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"validate_project\",\n  \"arguments\": {\n    \"directory\": \".\",\n    \"exclude\": [\"node_modules/**\", \"build/**\"],\n    \"parallel\": true,\n    \"fixIssues\": false\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#batch_validate","title":"batch_validate","text":"<p>Validate multiple files with specified tools.</p> <p>Parameters: - <code>files</code> (array, required): Files to validate - <code>tools</code> (array, required): Tools to use for validation - <code>parallel</code> (boolean, optional): Run in parallel (default: true)</p> <p>Example: <pre><code>{\n  \"name\": \"batch_validate\",\n  \"arguments\": {\n    \"files\": [\"src/**/*.py\", \"src/**/*.js\"],\n    \"tools\": [\"python-black\", \"js-prettier\"],\n    \"parallel\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#security-tools","title":"Security Tools","text":""},{"location":"mcp-tool-api/#security_secrets_scan","title":"security_secrets_scan","text":"<p>Scan for exposed secrets and credentials.</p> <p>Parameters: - <code>directory</code> (string, optional): Directory to scan (default: \".\") - <code>exclude</code> (array, optional): Patterns to exclude</p> <p>Example: <pre><code>{\n  \"name\": \"security_secrets_scan\",\n  \"arguments\": {\n    \"directory\": \".\",\n    \"exclude\": [\".git/**\", \"node_modules/**\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#security_dependency_audit","title":"security_dependency_audit","text":"<p>Audit dependencies for vulnerabilities.</p> <p>Parameters: - <code>packageFile</code> (string, required): Package file to audit (package.json, requirements.txt, etc.)</p> <p>Example: <pre><code>{\n  \"name\": \"security_dependency_audit\",\n  \"arguments\": {\n    \"packageFile\": \"package.json\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#validation-queue-tools","title":"Validation Queue Tools","text":""},{"location":"mcp-tool-api/#queue_validation","title":"queue_validation","text":"<p>Queue repository for validation.</p> <p>Parameters: - <code>repository</code> (string, required): Repository URL - <code>branch</code> (string, optional): Branch to validate (default: \"main\") - <code>tools</code> (array, optional): Tools to use</p> <p>Example: <pre><code>{\n  \"name\": \"queue_validation\",\n  \"arguments\": {\n    \"repository\": \"https://github.com/user/repo\",\n    \"branch\": \"develop\",\n    \"tools\": [\"python-black\", \"python-flake8\"]\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#queue_status","title":"queue_status","text":"<p>Get validation queue status.</p> <p>Parameters: - <code>jobId</code> (string, optional): Specific job ID to check</p> <p>Example: <pre><code>{\n  \"name\": \"queue_status\",\n  \"arguments\": {\n    \"jobId\": \"job-123456\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#syncthing-integration-tools","title":"Syncthing Integration Tools","text":""},{"location":"mcp-tool-api/#syncthing_list_repos","title":"syncthing_list_repos","text":"<p>List synchronized repositories.</p> <p>Parameters: None</p> <p>Example: <pre><code>{\n  \"name\": \"syncthing_list_repos\",\n  \"arguments\": {}\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#syncthing_add_repo","title":"syncthing_add_repo","text":"<p>Add repository for synchronization.</p> <p>Parameters: - <code>repository</code> (string, required): Repository name - <code>path</code> (string, required): Local path for repository</p> <p>Example: <pre><code>{\n  \"name\": \"syncthing_add_repo\",\n  \"arguments\": {\n    \"repository\": \"my-project\",\n    \"path\": \"/workspace/my-project\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#syncthing_sync_status","title":"syncthing_sync_status","text":"<p>Get synchronization status.</p> <p>Parameters: - <code>repository</code> (string, optional): Repository to check</p> <p>Example: <pre><code>{\n  \"name\": \"syncthing_sync_status\",\n  \"arguments\": {\n    \"repository\": \"my-project\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#container-management-tools","title":"Container Management Tools","text":""},{"location":"mcp-tool-api/#container_list","title":"container_list","text":"<p>List all containers managed by Podman.</p> <p>Parameters: - <code>all</code> (boolean, optional): Include stopped containers (default: false)</p> <p>Example: <pre><code>{\n  \"name\": \"container_list\",\n  \"arguments\": {\n    \"all\": true\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#container_inspect","title":"container_inspect","text":"<p>Get detailed information about a specific container.</p> <p>Parameters: - <code>container</code> (string, required): Container ID or name</p> <p>Example: <pre><code>{\n  \"name\": \"container_inspect\",\n  \"arguments\": {\n    \"container\": \"huskycats-mcp-server\"\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#container_logs","title":"container_logs","text":"<p>Get container logs.</p> <p>Parameters: - <code>container</code> (string, required): Container ID or name - <code>tail</code> (number, optional): Number of lines to show (default: 100)</p> <p>Example: <pre><code>{\n  \"name\": \"container_logs\",\n  \"arguments\": {\n    \"container\": \"huskycats-mcp-server\",\n    \"tail\": 50\n  }\n}\n</code></pre></p>"},{"location":"mcp-tool-api/#resources","title":"Resources","text":"<p>The MCP server provides access to various resources:</p>"},{"location":"mcp-tool-api/#list-resources","title":"List Resources","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 4,\n  \"method\": \"resources/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#read-resource","title":"Read Resource","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 5,\n  \"method\": \"resources/read\",\n  \"params\": {\n    \"uri\": \"validation://report/latest\"\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#available-resources","title":"Available Resources","text":"<ol> <li>validation://report/latest - Latest validation report</li> <li>validation://queue/status - Current validation queue status</li> <li>validation://tools/available - List of all available validation tools</li> <li>container://logs/mcp-server - MCP server container logs</li> <li>syncthing://status - Syncthing synchronization status</li> </ol>"},{"location":"mcp-tool-api/#prompts","title":"Prompts","text":"<p>Pre-configured prompts for common tasks:</p>"},{"location":"mcp-tool-api/#list-prompts","title":"List Prompts","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 6,\n  \"method\": \"prompts/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#get-prompt","title":"Get Prompt","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 7,\n  \"method\": \"prompts/get\",\n  \"params\": {\n    \"name\": \"validate_codebase\",\n    \"arguments\": {\n      \"directory\": \"/path/to/project\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#available-prompts","title":"Available Prompts","text":"<ol> <li>validate_codebase - Validate an entire codebase</li> <li>fix_python_issues - Fix Python code issues automatically</li> <li>security_audit - Perform security audit</li> </ol>"},{"location":"mcp-tool-api/#batch-operations","title":"Batch Operations","text":"<p>The server supports batch requests for improved performance:</p> <pre><code>[\n  {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"method\": \"tools/list\"\n  },\n  {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 2,\n    \"method\": \"resources/list\"\n  },\n  {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 3,\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"python-black\",\n      \"arguments\": {\n        \"files\": [\"test.py\"]\n      }\n    }\n  }\n]\n</code></pre>"},{"location":"mcp-tool-api/#error-handling","title":"Error Handling","text":"<p>All errors follow the JSON-RPC 2.0 error format:</p> <pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"error\": {\n    \"code\": -32601,\n    \"message\": \"Method not found\",\n    \"data\": {\n      \"method\": \"unknown/method\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp-tool-api/#error-codes","title":"Error Codes","text":"<ul> <li><code>-32700</code>: Parse error</li> <li><code>-32600</code>: Invalid request</li> <li><code>-32601</code>: Method not found</li> <li><code>-32602</code>: Invalid params</li> <li><code>-32603</code>: Internal error</li> </ul>"},{"location":"mcp-tool-api/#authentication","title":"Authentication","text":"<p>For HTTP mode, include the Bearer token in the Authorization header:</p> <pre><code>POST /rpc HTTP/1.1\nHost: localhost:8080\nContent-Type: application/json\nAuthorization: Bearer YOUR_AUTH_TOKEN\n\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"tools/list\"\n}\n</code></pre>"},{"location":"mcp-tool-api/#ide-integration-examples","title":"IDE Integration Examples","text":""},{"location":"mcp-tool-api/#visual-studio-code-extension","title":"Visual Studio Code Extension","text":"<pre><code>import { MCPClient } from '@modelcontextprotocol/sdk';\n\nconst client = new MCPClient({\n  url: 'http://localhost:8080/rpc',\n  headers: {\n    'Authorization': 'Bearer YOUR_TOKEN'\n  }\n});\n\n// Initialize\nawait client.initialize({\n  protocolVersion: '2024-11-05',\n  capabilities: {},\n  clientInfo: {\n    name: 'vscode-huskycat',\n    version: '1.0.0'\n  }\n});\n\n// List tools\nconst tools = await client.listTools();\n\n// Call a tool\nconst result = await client.callTool({\n  name: 'python-black',\n  arguments: {\n    files: ['main.py'],\n    fix: true\n  }\n});\n</code></pre>"},{"location":"mcp-tool-api/#intellij-idea-plugin","title":"IntelliJ IDEA Plugin","text":"<pre><code>import com.modelcontextprotocol.MCPClient;\n\nMCPClient client = new MCPClient(\"http://localhost:8080/rpc\");\nclient.setAuthToken(\"YOUR_TOKEN\");\n\n// Initialize\nInitializeResponse response = client.initialize(\n    \"2024-11-05\",\n    new ClientInfo(\"intellij-huskycat\", \"1.0.0\")\n);\n\n// List tools\nToolsResponse tools = client.listTools();\n\n// Call a tool\nToolResult result = client.callTool(\n    \"python-black\",\n    Map.of(\"files\", List.of(\"main.py\"), \"fix\", true)\n);\n</code></pre>"},{"location":"mcp-tool-api/#python-client","title":"Python Client","text":"<pre><code>import requests\n\nclass MCPClient:\n    def __init__(self, url, token):\n        self.url = url\n        self.token = token\n        self.headers = {\n            'Content-Type': 'application/json',\n            'Authorization': f'Bearer {token}'\n        }\n        self.request_id = 0\n\n    def call(self, method, params=None):\n        self.request_id += 1\n        payload = {\n            'jsonrpc': '2.0',\n            'id': self.request_id,\n            'method': method,\n            'params': params or {}\n        }\n        response = requests.post(self.url, json=payload, headers=self.headers)\n        return response.json()\n\n# Usage\nclient = MCPClient('http://localhost:8080/rpc', 'YOUR_TOKEN')\n\n# Initialize\nclient.call('initialize', {\n    'protocolVersion': '2024-11-05',\n    'capabilities': {},\n    'clientInfo': {\n        'name': 'python-client',\n        'version': '1.0.0'\n    }\n})\n\n# List tools\ntools = client.call('tools/list')\n\n# Call a tool\nresult = client.call('tools/call', {\n    'name': 'python-black',\n    'arguments': {\n        'files': ['main.py'],\n        'fix': True\n    }\n})\n</code></pre>"},{"location":"mcp-tool-api/#performance-considerations","title":"Performance Considerations","text":"<ol> <li>Batch Operations: Use batch requests when calling multiple tools</li> <li>Parallel Execution: Enable <code>parallel: true</code> for project-wide validations</li> <li>Resource Caching: Resources are cached for 5 minutes by default</li> <li>Connection Pooling: Reuse HTTP connections for multiple requests</li> <li>Timeout Configuration: Default timeout is 30 seconds per tool</li> </ol>"},{"location":"mcp-tool-api/#troubleshooting","title":"Troubleshooting","text":""},{"location":"mcp-tool-api/#common-issues","title":"Common Issues","text":"<ol> <li>Authentication Failed</li> <li>Verify Bearer token is correct</li> <li> <p>Check token is properly configured in environment</p> </li> <li> <p>Tool Not Found</p> </li> <li>Ensure tool name is spelled correctly</li> <li> <p>Check tool is installed in container</p> </li> <li> <p>File Not Found</p> </li> <li>Use absolute paths or paths relative to workspace</li> <li> <p>Verify file exists before calling tool</p> </li> <li> <p>Timeout Errors</p> </li> <li>Increase timeout for large files</li> <li>Use batch operations for better performance</li> </ol>"},{"location":"mcp-tool-api/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging: <pre><code>export LOG_LEVEL=debug\nexport MCP_DEBUG=true\n</code></pre></p>"},{"location":"mcp-tool-api/#health-check","title":"Health Check","text":"<p>Check server health: <pre><code>curl http://localhost:8080/health\n</code></pre></p>"},{"location":"mcp-tool-api/#support","title":"Support","text":"<ul> <li>GitHub Issues: https://github.com/huskycats/huskycats-bates/issues</li> <li>Documentation: https://github.com/huskycats/huskycats-bates/docs</li> <li>MCP Specification: https://modelcontextprotocol.org</li> </ul>"},{"location":"api/mcp-tools/","title":"MCP Tools API Reference","text":"<p>This document provides detailed API specifications for all MCP tools exposed by HuskyCat's MCP server.</p>"},{"location":"api/mcp-tools/#tool-discovery","title":"Tool Discovery","text":"<p>The MCP server exposes tools through the standard <code>tools/list</code> method.</p>"},{"location":"api/mcp-tools/#request","title":"Request","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/list\",\n  \"id\": 1\n}\n</code></pre>"},{"location":"api/mcp-tools/#response","title":"Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\n    \"tools\": [\n      {\n        \"name\": \"validate\",\n        \"description\": \"Validate code files with appropriate linters\",\n        \"inputSchema\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"path\": {\n              \"type\": \"string\",\n              \"description\": \"File or directory path to validate\"\n            },\n            \"fix\": {\n              \"type\": \"boolean\",\n              \"description\": \"Auto-fix issues where possible\",\n              \"default\": false\n            }\n          },\n          \"required\": [\"path\"]\n        }\n      }\n      // ... other tools\n    ]\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#core-tools","title":"Core Tools","text":""},{"location":"api/mcp-tools/#validate","title":"<code>validate</code>","text":"<p>Universal validation tool that runs all applicable validators on the specified path.</p>"},{"location":"api/mcp-tools/#input-schema","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"File or directory path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#example-request","title":"Example Request","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"validate\",\n    \"arguments\": {\n      \"path\": \"src/\",\n      \"fix\": true\n    }\n  },\n  \"id\": 2\n}\n</code></pre>"},{"location":"api/mcp-tools/#example-response","title":"Example Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 2,\n  \"result\": {\n    \"content\": [\n      {\n        \"type\": \"text\",\n        \"text\": \"{\\n  \\\"summary\\\": {\\n    \\\"total_files\\\": 5,\\n    \\\"passed_files\\\": 4,\\n    \\\"failed_files\\\": 1,\\n    \\\"total_errors\\\": 2,\\n    \\\"total_warnings\\\": 1,\\n    \\\"failed_file_list\\\": [\\\"src/main.py\\\"],\\n    \\\"success\\\": false\\n  },\\n  \\\"results\\\": {\\n    \\\"src/main.py\\\": [\\n      {\\n        \\\"tool\\\": \\\"black\\\",\\n        \\\"filepath\\\": \\\"src/main.py\\\",\\n        \\\"success\\\": false,\\n        \\\"messages\\\": [\\\"reformatted src/main.py\\\"],\\n        \\\"errors\\\": [],\\n        \\\"warnings\\\": [],\\n        \\\"fixed\\\": true,\\n        \\\"duration_ms\\\": 45\\n      }\\n    ]\\n  }\\n}\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_staged","title":"<code>validate_staged</code>","text":"<p>Validates files that are staged for Git commit.</p>"},{"location":"api/mcp-tools/#input-schema_1","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#example-request_1","title":"Example Request","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"validate_staged\",\n    \"arguments\": {\n      \"fix\": false\n    }\n  },\n  \"id\": 3\n}\n</code></pre>"},{"location":"api/mcp-tools/#individual-validator-tools","title":"Individual Validator Tools","text":"<p>Each validator is exposed as a separate tool for targeted validation.</p>"},{"location":"api/mcp-tools/#validate_black","title":"<code>validate_black</code>","text":"<p>Python code formatter using Black.</p>"},{"location":"api/mcp-tools/#input-schema_2","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Python file path to format\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Apply Black formatting\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_flake8","title":"<code>validate_flake8</code>","text":"<p>Python linter using Flake8.</p>"},{"location":"api/mcp-tools/#input-schema_3","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Python file path to lint\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_mypy","title":"<code>validate_mypy</code>","text":"<p>Python type checker using MyPy.</p>"},{"location":"api/mcp-tools/#input-schema_4","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Python file path to type check\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_eslint","title":"<code>validate_eslint</code>","text":"<p>JavaScript/TypeScript linter using ESLint.</p>"},{"location":"api/mcp-tools/#input-schema_5","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"JavaScript/TypeScript file path to lint\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Apply ESLint fixes\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_yamllint","title":"<code>validate_yamllint</code>","text":"<p>YAML validator using yamllint.</p>"},{"location":"api/mcp-tools/#input-schema_6","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"YAML file path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_hadolint","title":"<code>validate_hadolint</code>","text":"<p>Dockerfile/ContainerFile linter using hadolint.</p>"},{"location":"api/mcp-tools/#input-schema_7","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Dockerfile path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#validate_shellcheck","title":"<code>validate_shellcheck</code>","text":"<p>Shell script validator using shellcheck.</p>"},{"location":"api/mcp-tools/#input-schema_8","title":"Input Schema","text":"<pre><code>{\n  \"type\": \"object\",\n  \"properties\": {\n    \"path\": {\n      \"type\": \"string\",\n      \"description\": \"Shell script path to validate\"\n    },\n    \"fix\": {\n      \"type\": \"boolean\",\n      \"description\": \"Auto-fix issues where possible\",\n      \"default\": false\n    }\n  },\n  \"required\": [\"path\"]\n}\n</code></pre>"},{"location":"api/mcp-tools/#response-format","title":"Response Format","text":"<p>All tools return responses in the same format:</p>"},{"location":"api/mcp-tools/#success-response","title":"Success Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"&lt;request_id&gt;\",\n  \"result\": {\n    \"content\": [\n      {\n        \"type\": \"text\",\n        \"text\": \"&lt;JSON_formatted_results&gt;\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#error-response","title":"Error Response","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"&lt;request_id&gt;\",\n  \"error\": {\n    \"code\": -32603,\n    \"message\": \"Internal error: &lt;error_description&gt;\"\n  }\n}\n</code></pre>"},{"location":"api/mcp-tools/#result-objects","title":"Result Objects","text":""},{"location":"api/mcp-tools/#validationresult","title":"ValidationResult","text":"<p>Individual validation results are returned as <code>ValidationResult</code> objects:</p> <pre><code>{\n  \"tool\": \"black\",\n  \"filepath\": \"src/main.py\",\n  \"success\": true,\n  \"messages\": [\"File is properly formatted\"],\n  \"errors\": [],\n  \"warnings\": [],\n  \"fixed\": false,\n  \"duration_ms\": 42\n}\n</code></pre>"},{"location":"api/mcp-tools/#fields","title":"Fields","text":"<ul> <li><code>tool</code>: Name of the validator that produced this result</li> <li><code>filepath</code>: Path to the validated file</li> <li><code>success</code>: Whether validation passed (no errors)</li> <li><code>messages</code>: General messages from the validator</li> <li><code>errors</code>: List of error messages (validation failures)</li> <li><code>warnings</code>: List of warning messages (non-blocking issues)</li> <li><code>fixed</code>: Whether auto-fixes were applied</li> <li><code>duration_ms</code>: Time taken for validation in milliseconds</li> </ul>"},{"location":"api/mcp-tools/#summary-object","title":"Summary Object","text":"<p>Aggregate summary of all validation results:</p> <pre><code>{\n  \"total_files\": 5,\n  \"passed_files\": 4,\n  \"failed_files\": 1,\n  \"total_errors\": 2,\n  \"total_warnings\": 1,\n  \"failed_file_list\": [\"src/main.py\"],\n  \"success\": false\n}\n</code></pre>"},{"location":"api/mcp-tools/#fields_1","title":"Fields","text":"<ul> <li><code>total_files</code>: Total number of files validated</li> <li><code>passed_files</code>: Number of files that passed all validators</li> <li><code>failed_files</code>: Number of files with at least one validation error</li> <li><code>total_errors</code>: Total count of all errors across all files</li> <li><code>total_warnings</code>: Total count of all warnings across all files</li> <li><code>failed_file_list</code>: List of file paths that have validation errors</li> <li><code>success</code>: Overall validation status (true if no files failed)</li> </ul>"},{"location":"api/mcp-tools/#error-codes","title":"Error Codes","text":"<p>The MCP server uses standard JSON-RPC error codes:</p> Code Meaning Description -32700 Parse error Invalid JSON was received -32600 Invalid Request The JSON sent is not a valid Request object -32601 Method not found The method does not exist / is not available -32602 Invalid params Invalid method parameter(s) -32603 Internal error Internal JSON-RPC error"},{"location":"api/mcp-tools/#rate-limiting","title":"Rate Limiting","text":"<p>The MCP server does not implement rate limiting, but individual validators may have their own performance characteristics:</p> <ul> <li>Fast validators (&lt; 100ms): Black, yamllint, shellcheck</li> <li>Medium validators (100-500ms): Flake8, ESLint</li> <li>Slow validators (&gt; 500ms): MyPy (especially on large codebases)</li> </ul>"},{"location":"api/mcp-tools/#debugging","title":"Debugging","text":""},{"location":"api/mcp-tools/#enable-debug-logging","title":"Enable Debug Logging","text":"<p>Set the environment variable before starting the MCP server:</p> <pre><code>HUSKYCAT_LOG_LEVEL=DEBUG huskycat mcp-server\n</code></pre>"},{"location":"api/mcp-tools/#manual-testing","title":"Manual Testing","text":"<p>You can test the MCP server manually using stdin/stdout:</p> <pre><code># Start the server\nhuskycat mcp-server\n\n# Send initialization request\necho '{\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"params\":{},\"id\":1}'\n\n# List tools\necho '{\"jsonrpc\":\"2.0\",\"method\":\"tools/list\",\"params\":{},\"id\":2}'\n\n# Call a tool\necho '{\"jsonrpc\":\"2.0\",\"method\":\"tools/call\",\"params\":{\"name\":\"validate\",\"arguments\":{\"path\":\".\"}},\"id\":3}'\n</code></pre> <p>For more information about MCP integration, see the MCP Server Guide.</p>"},{"location":"architecture/simplified-architecture/","title":"HuskyCat Simplified Architecture","text":""},{"location":"architecture/simplified-architecture/#overview","title":"Overview","text":"<p>HuskyCat is a streamlined code validation platform that provides comprehensive validation tools through a simple, unified interface. This document outlines the simplified architecture after removing redundancy and consolidating implementations.</p>"},{"location":"architecture/simplified-architecture/#core-principles","title":"Core Principles","text":"<ol> <li>Single Source of Truth: One validation engine with multiple interfaces</li> <li>Minimal Configuration: Works out-of-the-box with sensible defaults</li> <li>Container-First: All tools pre-installed in optimized containers</li> <li>Easy Installation: One-line installer for any repository</li> </ol>"},{"location":"architecture/simplified-architecture/#architecture-components","title":"Architecture Components","text":""},{"location":"architecture/simplified-architecture/#1-unified-validation-engine","title":"1. Unified Validation Engine","text":"<pre><code>src/\n\u251c\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 validation-engine.py    # Core validation logic\n\u2502   \u251c\u2500\u2500 tool-registry.py        # Tool discovery and registration\n\u2502   \u2514\u2500\u2500 result-formatter.py     # Unified result formatting\n\u251c\u2500\u2500 interfaces/\n\u2502   \u251c\u2500\u2500 cli.py                  # Command-line interface\n\u2502   \u251c\u2500\u2500 mcp-stdio.py            # MCP stdio server\n\u2502   \u2514\u2500\u2500 git-hooks.py            # Git hook integration\n\u2514\u2500\u2500 tools/\n    \u251c\u2500\u2500 python/                 # Python validators\n    \u251c\u2500\u2500 javascript/             # JS/TS validators\n    \u251c\u2500\u2500 yaml/                   # YAML validators\n    \u2514\u2500\u2500 security/               # Security scanners\n</code></pre>"},{"location":"architecture/simplified-architecture/#2-container-architecture","title":"2. Container Architecture","text":"<p>Production Container (Alpine-based): - Size: ~200MB - All validation tools pre-installed - Read-only filesystem except /tmp and /workspace - Non-root user (UID 1001) - Optimized for speed</p> <p>Development Container (Alpine-based with extras): - Size: ~400MB - Includes debugging tools - Write access for development - Additional language servers</p>"},{"location":"architecture/simplified-architecture/#3-mcp-server-simplified","title":"3. MCP Server (Simplified)","text":"<p>The MCP server is now a simple stdio-based server that: - Reads JSON-RPC requests from stdin - Executes validation tools - Writes responses to stdout - No HTTP layer, no complexity</p> <pre><code># Simple stdio MCP server\nimport sys\nimport json\nfrom validation_engine import ValidationEngine\n\nengine = ValidationEngine()\n\nwhile True:\n    request = json.loads(sys.stdin.readline())\n    result = engine.validate(request)\n    sys.stdout.write(json.dumps(result) + '\\n')\n    sys.stdout.flush()\n</code></pre>"},{"location":"architecture/simplified-architecture/#4-installation","title":"4. Installation","text":"<p>One-Line Installer: <pre><code>curl -fsSL https://huskycat.io/install | bash\n</code></pre></p> <p>This installer: 1. Detects platform (Linux/macOS/Windows) 2. Downloads appropriate container 3. Installs huskycat CLI 4. Sets up git hooks (optional) 5. Configures MCP server (if Claude Code detected)</p>"},{"location":"architecture/simplified-architecture/#5-configuration","title":"5. Configuration","text":"<p>Single configuration file: <code>.huskycat.yaml</code></p> <pre><code># .huskycat.yaml - All configuration in one place\nversion: 2.0\n\n# Tool configuration (all enabled by default)\ntools:\n  python:\n    black: true\n    flake8: true\n    mypy: true\n    bandit: true\n  javascript:\n    eslint: true\n    prettier: true\n  yaml:\n    yamllint: true\n  docker:\n    hadolint: true\n\n# Git hooks (opt-in)\nhooks:\n  pre-commit: true\n  commit-msg: true\n\n# MCP server (auto-detected)\nmcp:\n  enabled: auto\n  transport: stdio\n</code></pre>"},{"location":"architecture/simplified-architecture/#removed-components","title":"Removed Components","text":"<p>The following have been removed to simplify the architecture:</p> <ol> <li>Syncthing Integration (2,307 lines removed)</li> <li>All syncthing-related code</li> <li>Distributed sync features</li> <li> <p>P2P functionality</p> </li> <li> <p>HTTP MCP Server (1,000+ lines removed)</p> </li> <li>Complex HTTP layer</li> <li>Authentication middleware</li> <li> <p>Session management</p> </li> <li> <p>Duplicate Implementations (15,000+ lines removed)</p> </li> <li>Three separate validation implementations consolidated</li> <li>Redundant container scripts</li> <li> <p>Duplicate configuration systems</p> </li> <li> <p>Kubernetes Manifests (5,000+ lines removed)</p> </li> <li>Complex K8s deployments</li> <li>Duplicate manifests</li> <li>Hardcoded secrets</li> </ol>"},{"location":"architecture/simplified-architecture/#tool-support","title":"Tool Support","text":"<p>All tools run by default - no configuration needed:</p> Language Tools Python Black, Flake8, MyPy, Pylint, Bandit, Ruff JavaScript/TypeScript ESLint, Prettier, TSC Shell ShellCheck YAML YAMLLint Docker Hadolint Terraform TFLint, Checkov Go golangci-lint Security GitLeaks, TruffleHog"},{"location":"architecture/simplified-architecture/#usage-examples","title":"Usage Examples","text":""},{"location":"architecture/simplified-architecture/#cli-usage","title":"CLI Usage","text":"<pre><code># Validate all files\nhuskycat validate\n\n# Auto-fix issues\nhuskycat fix\n\n# Validate specific files\nhuskycat validate src/*.py\n\n# Use with git\ngit commit  # Automatically validates staged files\n</code></pre>"},{"location":"architecture/simplified-architecture/#mcp-integration","title":"MCP Integration","text":"<pre><code>// .claude/mcp.json\n{\n  \"servers\": {\n    \"huskycat\": {\n      \"command\": \"huskycat\",\n      \"args\": [\"mcp\", \"--stdio\"]\n    }\n  }\n}\n</code></pre>"},{"location":"architecture/simplified-architecture/#container-usage","title":"Container Usage","text":"<pre><code># Run validation in container\npodman run --rm -v .:/workspace huskycat/validator\n\n# Development container\npodman run -it --rm -v .:/workspace huskycat/validator:dev bash\n</code></pre>"},{"location":"architecture/simplified-architecture/#performance","title":"Performance","text":"<p>After simplification: - Startup time: &lt;1 second - Validation speed: 10x faster (no network overhead) - Container size: 70% smaller - Memory usage: 50% reduction - Code maintenance: 40% less code to maintain</p>"},{"location":"architecture/simplified-architecture/#migration-guide","title":"Migration Guide","text":"<p>For existing users:</p> <ol> <li> <p>Remove old configuration files:    <pre><code>rm -rf .roo/ .mcp.json claude-flow.config.json\n</code></pre></p> </li> <li> <p>Install new version:    <pre><code>curl -fsSL https://huskycat.io/install | bash\n</code></pre></p> </li> <li> <p>Setup git hooks (optional):    <pre><code>huskycat setup-hooks\n</code></pre></p> </li> </ol>"},{"location":"architecture/simplified-architecture/#benefits-of-simplification","title":"Benefits of Simplification","text":"<ol> <li>Ease of Use: Works immediately after installation</li> <li>Performance: Direct execution without network overhead</li> <li>Reliability: Fewer moving parts = fewer failures</li> <li>Maintainability: 40% less code to maintain</li> <li>Security: No network exposure, no hardcoded secrets</li> <li>Portability: Single binary or container works everywhere</li> </ol>"},{"location":"architecture/simplified-architecture/#next-steps","title":"Next Steps","text":"<ol> <li>Implement unified validation engine</li> <li>Create simplified stdio MCP server</li> <li>Build optimized containers</li> <li>Develop one-line installer</li> <li>Write comprehensive tests</li> <li>Deploy and monitor</li> </ol> <p>This simplified architecture maintains all the power of the original system while removing unnecessary complexity. The result is a fast, reliable, and easy-to-use validation platform that \"just works.\"</p>"},{"location":"features/mcp-server/","title":"MCP Server Integration","text":"<p>HuskyCat includes a built-in stdio-based MCP Server with container-backed validation tools, enabling AI-powered code quality feedback through Claude Code integration.</p>"},{"location":"features/mcp-server/#what-is-mcp","title":"What is MCP?","text":"<p>The Model Context Protocol (MCP) is an open standard that allows AI assistants like Claude to connect with external tools and data sources. HuskyCat's MCP server exposes its validation capabilities as tools that Claude Code can use.</p>"},{"location":"features/mcp-server/#quick-setup","title":"Quick Setup","text":""},{"location":"features/mcp-server/#1-build-huskycat","title":"1. Build HuskyCat","text":"<pre><code>git clone &lt;repository&gt;\ncd huskycats-bates\nnpm install\nuv sync --dev\n\n# Build container (required for validation)\nnpm run container:build\n\n# Build binary entry point  \nnpm run build:binary\n</code></pre>"},{"location":"features/mcp-server/#2-configure-claude-code-mcp","title":"2. Configure Claude Code MCP","text":"<p>Add to Claude Code MCP configuration: <pre><code>{\n  \"mcpServers\": {\n    \"huskycat\": {\n      \"command\": \"/path/to/huskycat\",\n      \"args\": [\"mcp-server\"]\n    }\n  }\n}\n</code></pre></p> <p>Note: HuskyCat uses stdio protocol by default - no port needed.</p>"},{"location":"features/mcp-server/#3-verify-installation","title":"3. Verify Installation","text":"<p>In Claude Code, you should now see HuskyCat tools available:</p> <ul> <li><code>validate</code> - Validate files or directories</li> <li><code>validate_staged</code> - Validate staged Git files</li> <li>Individual validator tools (e.g., <code>validate_black</code>, <code>validate_flake8</code>)</li> </ul>"},{"location":"features/mcp-server/#available-tools","title":"Available Tools","text":""},{"location":"features/mcp-server/#core-tools","title":"Core Tools","text":""},{"location":"features/mcp-server/#validate","title":"<code>validate</code>","text":"<p>Validates files or directories with all applicable validators.</p> <p>Parameters: - <code>path</code> (required): File or directory path to validate - <code>fix</code> (optional): Auto-fix issues where possible (default: false)</p> <p>Example usage in Claude Code: <pre><code>Please validate the Python files in my src/ directory and fix any issues.\n</code></pre></p>"},{"location":"features/mcp-server/#validate_staged","title":"<code>validate_staged</code>","text":"<p>Validates files staged for Git commit.</p> <p>Parameters: - <code>fix</code> (optional): Auto-fix issues where possible (default: false)</p> <p>Example usage in Claude Code: <pre><code>Check my staged files before I commit them.\n</code></pre></p>"},{"location":"features/mcp-server/#individual-validator-tools","title":"Individual Validator Tools","text":"<p>Each validator has its own tool for targeted validation:</p> <ul> <li><code>validate_black</code> - Python code formatting</li> <li><code>validate_flake8</code> - Python linting</li> <li><code>validate_mypy</code> - Python type checking</li> <li><code>validate_eslint</code> - JavaScript/TypeScript linting</li> <li><code>validate_yamllint</code> - YAML validation</li> <li><code>validate_hadolint</code> - Dockerfile validation</li> <li><code>validate_shellcheck</code> - Shell script validation</li> </ul> <p>Parameters: - <code>path</code> (required): File path to validate - <code>fix</code> (optional): Auto-fix issues where possible (default: false)</p>"},{"location":"features/mcp-server/#architecture","title":"Architecture","text":"<pre><code>sequenceDiagram\n    participant CC as Claude Code\n    participant MCP as MCP Server\n    participant VE as Validation Engine\n    participant V as Validators\n\n    CC-&gt;&gt;MCP: tool call (validate)\n    MCP-&gt;&gt;VE: validate_file/directory\n    VE-&gt;&gt;V: run validators\n    V-&gt;&gt;VE: results\n    VE-&gt;&gt;MCP: aggregated results\n    MCP-&gt;&gt;CC: formatted response</code></pre>"},{"location":"features/mcp-server/#example-workflows","title":"Example Workflows","text":""},{"location":"features/mcp-server/#1-pre-commit-validation","title":"1. Pre-Commit Validation","text":"<p>In Claude Code: <pre><code>I'm about to commit my changes. Can you validate my staged files and fix any issues?\n</code></pre></p> <p>This will: 1. Run <code>validate_staged</code> with <code>fix: true</code> 2. Show you exactly what was validated 3. Apply auto-fixes where possible 4. Report any remaining issues</p>"},{"location":"features/mcp-server/#2-directory-validation","title":"2. Directory Validation","text":"<p>In Claude Code: <pre><code>Please check all Python files in my project for type errors and style issues.\n</code></pre></p> <p>This will: 1. Run <code>validate</code> on your project directory 2. Focus on Python files 3. Run MyPy, Black, Flake8, and Ruff 4. Provide a detailed report</p>"},{"location":"features/mcp-server/#3-specific-tool-validation","title":"3. Specific Tool Validation","text":"<p>In Claude Code: <pre><code>Run ESLint on my main.js file and fix any issues.\n</code></pre></p> <p>This will: 1. Run <code>validate_eslint</code> with <code>fix: true</code> 2. Apply ESLint auto-fixes 3. Report the results</p>"},{"location":"features/mcp-server/#configuration","title":"Configuration","text":""},{"location":"features/mcp-server/#mcp-server-settings","title":"MCP Server Settings","text":"<p>The MCP server reads the same configuration as the CLI tool. You can customize validation behavior through:</p> <ol> <li>Project configuration (pyproject.toml, .flake8, etc.)</li> <li>Environment variables (HUSKYCAT_LOG_LEVEL, etc.)</li> <li>Tool parameters (passed through MCP calls)</li> </ol>"},{"location":"features/mcp-server/#logging","title":"Logging","text":"<p>MCP server logs are written to stderr to avoid interfering with the stdio protocol. Set the log level:</p> <pre><code>HUSKYCAT_LOG_LEVEL=DEBUG claude mcp add huskycat \"huskycat mcp-server\"\n</code></pre>"},{"location":"features/mcp-server/#advanced-usage","title":"Advanced Usage","text":""},{"location":"features/mcp-server/#custom-validation-workflows","title":"Custom Validation Workflows","text":"<p>You can combine multiple MCP tools in Claude Code workflows:</p> <pre><code>1. First, validate my Python code with Black and fix formatting\n2. Then run MyPy for type checking\n3. Finally, validate my YAML configuration files\n</code></pre>"},{"location":"features/mcp-server/#integration-with-git-hooks","title":"Integration with Git Hooks","text":"<p>The MCP server works seamlessly with Git hooks. You can:</p> <ol> <li>Validate staged files before committing</li> <li>Set up pre-push validation</li> <li>Integrate with CI/CD workflows</li> </ol>"},{"location":"features/mcp-server/#container-only-validation","title":"Container-Only Validation","text":"<p>The MCP server uses container-only execution for all validation:</p> <pre><code># All validation automatically runs in containers\n./dist/huskycat mcp-server  # Uses container internally\n\n# Verify container is working\nnpm run container:test\n</code></pre> <p>Benefits: - Consistent toolchain across environments - Repository isolation and safety - No missing tool dependencies</p>"},{"location":"features/mcp-server/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/mcp-server/#common-issues","title":"Common Issues","text":"<ol> <li>Tool not found: Ensure HuskyCat is properly installed and in your PATH</li> <li>Permission errors: Check file permissions and directory access</li> <li>Python not found: Some validators require Python to be installed</li> </ol>"},{"location":"features/mcp-server/#debug-mode","title":"Debug Mode","text":"<p>Enable verbose logging for troubleshooting:</p> <pre><code>HUSKYCAT_LOG_LEVEL=DEBUG huskycat mcp-server\n</code></pre>"},{"location":"features/mcp-server/#manual-testing","title":"Manual Testing","text":"<p>Test the MCP server manually:</p> <pre><code># Start the server\nhuskycat mcp-server\n\n# Send a test request (JSON-RPC format)\necho '{\"jsonrpc\":\"2.0\",\"method\":\"initialize\",\"params\":{},\"id\":1}' | huskycat mcp-server\n</code></pre>"},{"location":"features/mcp-server/#technical-details","title":"Technical Details","text":""},{"location":"features/mcp-server/#protocol-compliance","title":"Protocol Compliance","text":"<p>HuskyCat's MCP server implements MCP version 2024-11-05 and supports:</p> <ul> <li>Tool discovery and invocation</li> <li>JSON-RPC 2.0 communication</li> <li>Error handling and reporting</li> <li>Structured result formatting</li> </ul>"},{"location":"features/mcp-server/#performance","title":"Performance","text":"<ul> <li>Fast startup: &lt; 100ms initialization time</li> <li>Efficient validation: Parallel execution of validators</li> <li>Smart caching: Avoid re-running unchanged validators</li> <li>Resource management: Automatic cleanup and memory management</li> </ul>"},{"location":"features/mcp-server/#security","title":"Security","text":"<ul> <li>Sandboxed execution: Validators run in controlled environments</li> <li>Path validation: Prevent directory traversal attacks</li> <li>Input sanitization: Clean and validate all inputs</li> <li>Error isolation: Failures don't crash the server</li> </ul>"},{"location":"features/mcp-server/#api-reference","title":"API Reference","text":"<p>For complete API documentation, see our MCP Tools API Reference.</p> <p>The MCP server integration makes HuskyCat incredibly powerful when combined with Claude Code's AI capabilities, enabling intelligent code validation workflows that adapt to your specific needs.</p>"}]}