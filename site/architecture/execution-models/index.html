
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Universal Code Validation Platform" name="description"/>
<link href="https://huskycat-570fbd.gitlab.io/architecture/execution-models/" rel="canonical"/>
<link href="../product-modes/" rel="prev"/>
<link href="../../ci-cd/gitlab/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.18" name="generator"/>
<title>Execution Models - HuskyCat Documentation</title>
<link href="../../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="blue" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#huskycat-execution-models">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="HuskyCat Documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="HuskyCat Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            HuskyCat Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Execution Models
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://gitlab.com/tinyland/ai/huskycat" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4" fill="currentColor"></path></svg>
</div>
<div class="md-source__repository">
    tinyland/ai/huskycat
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../installation/">
          
  
  
    
  
  Getting Started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../cli-reference/">
        
  
  
    
  
  CLI Reference

      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../features/mcp-server/">
          
  
  
    
  
  Features

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../product-modes/">
          
  
  
    
  
  Architecture

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../ci-cd/gitlab/">
          
  
  
    
  
  CI/CD Integration

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../dogfooding/">
          
  
  
    
  
  Development

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../performance/">
          
  
  
    
  
  Advanced

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../api/mcp-tools/">
          
  
  
    
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../troubleshooting/">
        
  
  
    
  
  Troubleshooting

      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="HuskyCat Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="HuskyCat Documentation">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    HuskyCat Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://gitlab.com/tinyland/ai/huskycat" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4" fill="currentColor"></path></svg>
</div>
<div class="md-source__repository">
    tinyland/ai/huskycat
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Getting Started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../installation/">
<span class="md-ellipsis">
    Installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../binary-downloads/">
<span class="md-ellipsis">
    Binary Downloads
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli-reference/">
<span class="md-ellipsis">
    CLI Reference
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Features
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Features
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../features/mcp-server/">
<span class="md-ellipsis">
    MCP Server
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../nonblocking-hooks/">
<span class="md-ellipsis">
    Non-Blocking Hooks
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
<span class="md-ellipsis">
    Architecture
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../product-modes/">
<span class="md-ellipsis">
    Product Modes
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Execution Models
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Execution Models
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-model-selection-logic">
<span class="md-ellipsis">
      Execution Model Selection Logic
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sprint-10-updates">
<span class="md-ellipsis">
      Sprint 10 Updates
    </span>
</a>
<nav aria-label="Sprint 10 Updates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#new-execution-modes">
<span class="md-ellipsis">
      New Execution Modes
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-1-binary-execution">
<span class="md-ellipsis">
      Model 1: Binary Execution
    </span>
</a>
<nav aria-label="Model 1: Binary Execution" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#entry-point">
<span class="md-ellipsis">
      Entry Point
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build-process">
<span class="md-ellipsis">
      Build Process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-flow">
<span class="md-ellipsis">
      Execution Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#container-dependency-optional">
<span class="md-ellipsis">
      Container Dependency: OPTIONAL
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases">
<span class="md-ellipsis">
      Use Cases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-2-container-execution">
<span class="md-ellipsis">
      Model 2: Container Execution
    </span>
</a>
<nav aria-label="Model 2: Container Execution" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#container-definition">
<span class="md-ellipsis">
      Container Definition
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#installed-tools">
<span class="md-ellipsis">
      Installed Tools
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multi-architecture-support">
<span class="md-ellipsis">
      Multi-Architecture Support
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#container-runtime-detection">
<span class="md-ellipsis">
      Container Runtime Detection
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#direct-vs-delegated-execution">
<span class="md-ellipsis">
      Direct vs. Delegated Execution
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases_1">
<span class="md-ellipsis">
      Use Cases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-3-uv-development-mode">
<span class="md-ellipsis">
      Model 3: UV Development Mode
    </span>
</a>
<nav aria-label="Model 3: UV Development Mode" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#entry-point_1">
<span class="md-ellipsis">
      Entry Point
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#uv-configuration">
<span class="md-ellipsis">
      UV Configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-flow_1">
<span class="md-ellipsis">
      Execution Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#differences-from-binary-execution">
<span class="md-ellipsis">
      Differences from Binary Execution
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases_2">
<span class="md-ellipsis">
      Use Cases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-model-selection-by-use-case">
<span class="md-ellipsis">
      Execution Model Selection by Use Case
    </span>
</a>
<nav aria-label="Execution Model Selection by Use Case" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#fast-tools-subset-git-hooks">
<span class="md-ellipsis">
      Fast Tools Subset (Git Hooks)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#all-tools-ci-mode">
<span class="md-ellipsis">
      All Tools (CI Mode)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#container-runtime-requirements">
<span class="md-ellipsis">
      Container Runtime Requirements
    </span>
</a>
<nav aria-label="Container Runtime Requirements" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#when-container-runtime-is-required">
<span class="md-ellipsis">
      When Container Runtime is Required
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#when-container-runtime-is-optional">
<span class="md-ellipsis">
      When Container Runtime is Optional
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fallback-behavior">
<span class="md-ellipsis">
      Fallback Behavior
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#implementation-files-reference">
<span class="md-ellipsis">
      Implementation Files Reference
    </span>
</a>
<nav aria-label="Implementation Files Reference" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#core-execution-logic">
<span class="md-ellipsis">
      Core Execution Logic
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mode-detection-routing">
<span class="md-ellipsis">
      Mode Detection &amp; Routing
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mode-specific-adapters">
<span class="md-ellipsis">
      Mode-Specific Adapters
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#build-distribution">
<span class="md-ellipsis">
      Build &amp; Distribution
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration">
<span class="md-ellipsis">
      Configuration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture-diagram-execution-model-selection">
<span class="md-ellipsis">
      Architecture Diagram: Execution Model Selection
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary-the-truth-about-container-only">
<span class="md-ellipsis">
      Summary: The Truth About "Container-Only"
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-4-non-blocking-mode-sprint-10">
<span class="md-ellipsis">
      Model 4: Non-Blocking Mode (Sprint 10)
    </span>
</a>
<nav aria-label="Model 4: Non-Blocking Mode (Sprint 10)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_1">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture">
<span class="md-ellipsis">
      Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-characteristics">
<span class="md-ellipsis">
      Performance Characteristics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration_1">
<span class="md-ellipsis">
      Configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#process-management">
<span class="md-ellipsis">
      Process Management
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tui-integration">
<span class="md-ellipsis">
      TUI Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cache-structure">
<span class="md-ellipsis">
      Cache Structure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases_3">
<span class="md-ellipsis">
      Use Cases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-5-embedded-tools-mode-sprint-10">
<span class="md-ellipsis">
      Model 5: Embedded Tools Mode (Sprint 10)
    </span>
</a>
<nav aria-label="Model 5: Embedded Tools Mode (Sprint 10)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_2">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tool-resolution-priority">
<span class="md-ellipsis">
      Tool Resolution Priority
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#architecture_1">
<span class="md-ellipsis">
      Architecture
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-comparison">
<span class="md-ellipsis">
      Performance Comparison
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#fat-binary-structure">
<span class="md-ellipsis">
      Fat Binary Structure
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tool-extraction-process">
<span class="md-ellipsis">
      Tool Extraction Process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#platform-support">
<span class="md-ellipsis">
      Platform Support
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration_2">
<span class="md-ellipsis">
      Configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases_4">
<span class="md-ellipsis">
      Use Cases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#model-6-parallel-execution-sprint-10">
<span class="md-ellipsis">
      Model 6: Parallel Execution (Sprint 10)
    </span>
</a>
<nav aria-label="Model 6: Parallel Execution (Sprint 10)" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview_3">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dependency-graph">
<span class="md-ellipsis">
      Dependency Graph
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-characteristics_1">
<span class="md-ellipsis">
      Performance Characteristics
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-flow_2">
<span class="md-ellipsis">
      Execution Flow
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#configuration_3">
<span class="md-ellipsis">
      Configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#resource-usage">
<span class="md-ellipsis">
      Resource Usage
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#use-cases_5">
<span class="md-ellipsis">
      Use Cases
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#execution-model-selection-by-use-case-updated">
<span class="md-ellipsis">
      Execution Model Selection by Use Case (Updated)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#related-documentation">
<span class="md-ellipsis">
      Related Documentation
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    CI/CD Integration
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            CI/CD Integration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ci-cd/gitlab/">
<span class="md-ellipsis">
    GitLab CI/CD
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../github-actions/">
<span class="md-ellipsis">
    GitHub Actions
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Development
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../dogfooding/">
<span class="md-ellipsis">
    Dogfooding Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../parallel_executor/">
<span class="md-ellipsis">
    Parallel Executor
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Advanced
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../performance/">
<span class="md-ellipsis">
    Performance
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../migration/to-nonblocking/">
<span class="md-ellipsis">
    Migration Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../macos-code-signing/">
<span class="md-ellipsis">
    macOS Code Signing
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle md-toggle--indeterminate" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../api/mcp-tools/">
<span class="md-ellipsis">
    MCP Tools
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="huskycat-execution-models">HuskyCat Execution Models<a class="headerlink" href="#huskycat-execution-models" title="Permanent link">¶</a></h1>
<p><strong>Source of Truth</strong>: This document describes the actual execution models implemented in HuskyCat, verified against code.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">¶</a></h2>
<p>HuskyCat supports <strong>THREE execution models</strong> with automatic context detection, NOT "container-only" execution:</p>
<ol>
<li><strong>Binary Execution</strong> - PyInstaller packaged binary with optional container delegation</li>
<li><strong>Container Execution</strong> - Alpine-based multi-tool container for comprehensive validation</li>
<li><strong>UV Development Mode</strong> - Direct Python module execution via UV package manager</li>
</ol>
<h2 id="execution-model-selection-logic">Execution Model Selection Logic<a class="headerlink" href="#execution-model-selection-logic" title="Permanent link">¶</a></h2>
<p><strong>Implementation</strong>: <code>src/huskycat/unified_validation.py:85-170</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># Line 85-109: Tool availability detection</span>
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_available</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="sd">"""Check if validator is available in current execution context"""</span>
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running_in_container</span><span class="p">():</span>
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="c1"># Inside container: check tool directly</span>
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">"which"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span>
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="k">else</span><span class="p">:</span>
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>        <span class="c1"># On host: check if container runtime available</span>
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="k">for</span> <span class="n">runtime</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"podman"</span><span class="p">,</span> <span class="s2">"docker"</span><span class="p">]:</span>
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="n">runtime</span><span class="p">,</span> <span class="s2">"--version"</span><span class="p">],</span> <span class="o">...</span><span class="p">)</span>
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>                <span class="k">return</span> <span class="kc">True</span>
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a>        <span class="k">return</span> <span class="kc">False</span>
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="c1"># Line 122-150: Command execution routing</span>
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">_execute_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running_in_container</span><span class="p">():</span>
<a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a>        <span class="c1"># Direct execution inside container</span>
<a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="k">return</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="k">else</span><span class="p">:</span>
<a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a>        <span class="c1"># Container-delegated execution from host</span>
<a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="n">container_cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_container_command</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<a href="#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a>        <span class="k">return</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">container_cmd</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
<p><strong>Key Insight</strong>: The system AUTO-DETECTS its execution context and routes commands accordingly. Container usage is OPTIONAL, not mandatory.</p>
<hr/>
<h2 id="sprint-10-updates">Sprint 10 Updates<a class="headerlink" href="#sprint-10-updates" title="Permanent link">¶</a></h2>
<h3 id="new-execution-modes">New Execution Modes<a class="headerlink" href="#new-execution-modes" title="Permanent link">¶</a></h3>
<p>Sprint 10 introduces two major execution enhancements:</p>
<ol>
<li><strong>Non-Blocking Mode</strong>: Git hooks return in &lt;100ms while validation runs in background</li>
<li><strong>Embedded Tools Mode</strong>: Fat binaries with bundled tools (no container dependency)</li>
</ol>
<p>These modes complement the existing execution models and are detailed below.</p>
<hr/>
<h2 id="model-1-binary-execution">Model 1: Binary Execution<a class="headerlink" href="#model-1-binary-execution" title="Permanent link">¶</a></h2>
<h3 id="entry-point">Entry Point<a class="headerlink" href="#entry-point" title="Permanent link">¶</a></h3>
<p><strong>File</strong>: <code>huskycat_main.py:1-27</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="ch">#!/usr/bin/env python3</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="sd">"""</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="sd">HuskyCat Binary Entry Point</span>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="sd">This wrapper enables PyInstaller single-file binary packaging</span>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="sd">while maintaining access to the full module structure.</span>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="sd">"""</span>
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">src.huskycat.__main__</span><span class="w"> </span><span class="kn">import</span> <span class="n">main</span>
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
<h3 id="build-process">Build Process<a class="headerlink" href="#build-process" title="Permanent link">¶</a></h3>
<p><strong>File</strong>: <code>.gitlab-ci.yml:268-298</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nt">binary:build:linux</span><span class="p">:</span>
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">package</span>
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rockylinux/rockylinux:10</span>
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv sync --extra build</span>
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mkdir -p dist/bin</span>
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uv run pyinstaller --onefile --name huskycat-linux-amd64 huskycat_main.py</span>
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mv dist/huskycat-linux-amd64 dist/bin/</span>
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">chmod +x dist/bin/huskycat-linux-amd64</span>
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">upx --best --lzma dist/bin/huskycat-linux-amd64</span><span class="w">  </span><span class="c1"># Optional compression</span>
</code></pre></div>
<h3 id="execution-flow">Execution Flow<a class="headerlink" href="#execution-flow" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>graph TD
    A[./dist/huskycat validate] --&gt; B[huskycat_main.py:main]
    B --&gt; C[__main__.py:main]
    C --&gt; D[mode_detector.detect_mode]
    D --&gt; E[Factory.create_command]
    E --&gt; F[ValidationEngine]
    F --&gt; G{Context?}
    G --&gt;|In Container| H[Direct tool execution]
    G --&gt;|On Host + Container Runtime| I[Container-delegated execution]
    G --&gt;|On Host + No Container Runtime| J[RuntimeError raised]

    style G fill:#fff3e0
    style J fill:#ffebee</code></pre>
<p><strong>File References</strong>:
- Binary wrapper: <code>huskycat_main.py:1-27</code>
- Main CLI: <code>src/huskycat/__main__.py:1-349</code>
- Mode detection: <code>src/huskycat/core/mode_detector.py:30-82</code>
- Validation engine: <code>src/huskycat/unified_validation.py:85-170</code></p>
<h3 id="container-dependency-optional">Container Dependency: OPTIONAL<a class="headerlink" href="#container-dependency-optional" title="Permanent link">¶</a></h3>
<p><strong>Reality</strong>: Binary checks for container runtime availability but has fallback logic.</p>
<p><strong>Evidence</strong> (<code>unified_validation.py:154-170</code>):
<div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_container_runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="sd">"""Get available container runtime or raise error"""</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="k">for</span> <span class="n">runtime</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">"podman"</span><span class="p">,</span> <span class="s2">"docker"</span><span class="p">]:</span>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a>        <span class="k">try</span><span class="p">:</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a>                <span class="p">[</span><span class="n">runtime</span><span class="p">,</span> <span class="s2">"--version"</span><span class="p">],</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a>                <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a href="#__codelineno-3-8" id="__codelineno-3-8" name="__codelineno-3-8"></a>                <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a href="#__codelineno-3-9" id="__codelineno-3-9" name="__codelineno-3-9"></a>                <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<a href="#__codelineno-3-10" id="__codelineno-3-10" name="__codelineno-3-10"></a>            <span class="p">)</span>
<a href="#__codelineno-3-11" id="__codelineno-3-11" name="__codelineno-3-11"></a>            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a href="#__codelineno-3-12" id="__codelineno-3-12" name="__codelineno-3-12"></a>                <span class="k">return</span> <span class="n">runtime</span>
<a href="#__codelineno-3-13" id="__codelineno-3-13" name="__codelineno-3-13"></a>        <span class="k">except</span> <span class="p">(</span><span class="n">subprocess</span><span class="o">.</span><span class="n">SubprocessError</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">):</span>
<a href="#__codelineno-3-14" id="__codelineno-3-14" name="__codelineno-3-14"></a>            <span class="k">continue</span>
<a href="#__codelineno-3-15" id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a href="#__codelineno-3-16" id="__codelineno-3-16" name="__codelineno-3-16"></a>    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a href="#__codelineno-3-17" id="__codelineno-3-17" name="__codelineno-3-17"></a>        <span class="s2">"No container runtime found. Please install podman or docker."</span>
<a href="#__codelineno-3-18" id="__codelineno-3-18" name="__codelineno-3-18"></a>    <span class="p">)</span>
</code></pre></div></p>
<p><strong>Behavior</strong>:
- If container runtime available: Uses container-delegated execution
- If no container runtime: Raises RuntimeError (user must install podman/docker)
- <strong>NOT silent fallback to local tools</strong> (security/consistency decision)</p>
<h3 id="use-cases">Use Cases<a class="headerlink" href="#use-cases" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Git Hooks</strong>: Fast validation of staged files (<code>validate --staged</code>)</li>
<li><strong>CLI Development</strong>: Interactive validation with progress indicators</li>
<li><strong>Production Deployments</strong>: Single-file binary distribution</li>
</ul>
<p><strong>File References</strong>:
- Git hooks implementation: <code>.git/hooks/pre-commit</code> (generated by <code>commands/hooks.py</code>)
- CLI adapter: <code>src/huskycat/core/adapters/cli.py</code></p>
<hr/>
<h2 id="model-2-container-execution">Model 2: Container Execution<a class="headerlink" href="#model-2-container-execution" title="Permanent link">¶</a></h2>
<h3 id="container-definition">Container Definition<a class="headerlink" href="#container-definition" title="Permanent link">¶</a></h3>
<p><strong>File</strong>: <code>ContainerFile:1-153</code></p>
<p><strong>Base Image</strong>: <code>alpine:3.19</code></p>
<p><strong>Multi-Stage Build</strong>:
1. <strong>Builder stage</strong> (lines 4-93): Install all validation tools
2. <strong>Production stage</strong> (lines 108-153): Copy tools, minimal runtime</p>
<h3 id="installed-tools">Installed Tools<a class="headerlink" href="#installed-tools" title="Permanent link">¶</a></h3>
<p><strong>Python Tools</strong> (lines 24-47):
- Code formatters: black, ruff, isort, autoflake
- Linters: flake8, pylint, mypy
- Security: bandit, safety
- Testing: pytest, hypothesis
- Docs: mkdocs, mkdocs-material
- Config: yamllint, ansible-lint</p>
<p><strong>Node.js Tools</strong> (lines 50-55):
- eslint, prettier, typescript, @typescript-eslint/*</p>
<p><strong>Shell Tools</strong> (line 70):
- shellcheck</p>
<p><strong>Docker Tools</strong> (lines 74-80):
- hadolint (multi-arch: x86_64, arm64)</p>
<p><strong>Rust Tools</strong> (lines 84-93):
- taplo-cli (TOML formatter, pre-built binaries for ARM64 speed)</p>
<p><strong>Infrastructure Tools</strong> (lines 96-106):
- terraform (multi-arch: amd64, arm64)</p>
<h3 id="multi-architecture-support">Multi-Architecture Support<a class="headerlink" href="#multi-architecture-support" title="Permanent link">¶</a></h3>
<p><strong>Build Jobs</strong> (<code>.gitlab-ci.yml:158-190</code>):</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="nt">container:build:amd64</span><span class="p">:</span>
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/buildah/stable:latest</span>
<a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="nt">PLATFORM</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">linux/amd64</span>
<a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="nt">ARCH</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amd64</span>
<a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah build --platform=$PLATFORM --layers -f ContainerFile \</span>
<a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">-t $CONTAINER_REGISTRY:$CONTAINER_TAG-$ARCH .</span>
<a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah push $CONTAINER_REGISTRY:$CONTAINER_TAG-$ARCH</span>
<a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>
<a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="nt">container:build:arm64</span><span class="p">:</span>
<a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">validate</span>
<a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">  </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/buildah/stable:latest</span>
<a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">    </span><span class="nt">PLATFORM</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">linux/arm64</span>
<a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">    </span><span class="nt">ARCH</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">arm64</span>
<a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah build --platform=$PLATFORM --layers -f ContainerFile \</span>
<a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">-t $CONTAINER_REGISTRY:$CONTAINER_TAG-$ARCH .</span>
<a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah push $CONTAINER_REGISTRY:$CONTAINER_TAG-$ARCH</span>
</code></pre></div>
<p><strong>Manifest Creation</strong> (<code>.gitlab-ci.yml:190-218</code>):
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="nt">container:build:manifest</span><span class="p">:</span>
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build</span>
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">  </span><span class="nt">dependencies</span><span class="p">:</span>
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">container:build:amd64</span>
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">container:build:arm64</span>
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah manifest create $CONTAINER_REGISTRY:$CONTAINER_TAG</span>
<a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah manifest add $CONTAINER_REGISTRY:$CONTAINER_TAG \</span>
<a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">$CONTAINER_REGISTRY:$CONTAINER_TAG-amd64</span>
<a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah manifest add $CONTAINER_REGISTRY:$CONTAINER_TAG \</span>
<a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">$CONTAINER_REGISTRY:$CONTAINER_TAG-arm64</span>
<a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buildah manifest push --all $CONTAINER_REGISTRY:$CONTAINER_TAG</span>
</code></pre></div></p>
<h3 id="container-runtime-detection">Container Runtime Detection<a class="headerlink" href="#container-runtime-detection" title="Permanent link">¶</a></h3>
<p><strong>Implementation</strong>: <code>unified_validation.py:111-120</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_is_running_in_container</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="sd">"""Detect if we're currently running inside a container"""</span>
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>    <span class="c1"># Check for container environment markers</span>
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="k">return</span> <span class="p">(</span>
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">"/.dockerenv"</span><span class="p">)</span>  <span class="c1"># Docker</span>
<a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>        <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"container"</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>  <span class="c1"># Podman</span>
<a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>        <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">"/run/.containerenv"</span><span class="p">)</span>  <span class="c1"># Podman alternative</span>
<a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>    <span class="p">)</span>
</code></pre></div>
<h3 id="direct-vs-delegated-execution">Direct vs. Delegated Execution<a class="headerlink" href="#direct-vs-delegated-execution" title="Permanent link">¶</a></h3>
<p><strong>Inside Container</strong> (<code>unified_validation.py:85-109</code>):
- Tools are pre-installed in container PATH
- Direct <code>subprocess.run</code> execution
- No container delegation needed</p>
<p><strong>On Host</strong> (<code>unified_validation.py:122-150</code>):
- Checks for podman/docker runtime
- Builds container command with volume mounts
- Delegates execution to container</p>
<p><strong>Example Container Command</strong> (constructed by <code>_build_container_command</code>):
<div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>podman<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span>-v<span class="w"> </span>/path/to/repo:/workspace:ro<span class="w"> </span><span class="se">\</span>
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">  </span>-w<span class="w"> </span>/workspace<span class="w"> </span><span class="se">\</span>
<a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">  </span>registry.gitlab.com/tinyland/ai/huskycat:latest-amd64<span class="w"> </span><span class="se">\</span>
<a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">  </span>black<span class="w"> </span>--check<span class="w"> </span>src/
</code></pre></div></p>
<h3 id="use-cases_1">Use Cases<a class="headerlink" href="#use-cases_1" title="Permanent link">¶</a></h3>
<ul>
<li><strong>CI/CD Pipelines</strong>: Guaranteed consistent toolchain (<code>.gitlab-ci.yml:44-120</code>)</li>
<li><strong>Comprehensive Validation</strong>: All tools available (<code>validate --all</code>)</li>
<li><strong>Multi-Arch Support</strong>: ARM64 and AMD64 native execution</li>
</ul>
<p><strong>File References</strong>:
- CI adapter: <code>src/huskycat/core/adapters/ci.py</code>
- Container build: <code>.gitlab-ci.yml:158-218</code>
- Container definition: <code>ContainerFile:1-153</code></p>
<hr/>
<h2 id="model-3-uv-development-mode">Model 3: UV Development Mode<a class="headerlink" href="#model-3-uv-development-mode" title="Permanent link">¶</a></h2>
<h3 id="entry-point_1">Entry Point<a class="headerlink" href="#entry-point_1" title="Permanent link">¶</a></h3>
<p><strong>File</strong>: <code>package.json:8-19</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nt">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="nt">"dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat"</span><span class="p">,</span>
<a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span><span class="nt">"validate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat validate"</span><span class="p">,</span>
<a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="nt">"validate:ci"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat ci-validate .gitlab-ci.yml"</span><span class="p">,</span>
<a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="nt">"mcp:server"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat mcp-server"</span><span class="p">,</span>
<a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="nt">"hooks:install"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat setup-hooks"</span><span class="p">,</span>
<a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="nt">"clean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat clean"</span><span class="p">,</span>
<a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uv run python3 -m src.huskycat status"</span>
<a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">}</span>
</code></pre></div>
<h3 id="uv-configuration">UV Configuration<a class="headerlink" href="#uv-configuration" title="Permanent link">¶</a></h3>
<p><strong>File</strong>: <code>pyproject.toml:1-100</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">[project]</span>
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"huskycat"</span>
<a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.1.0"</span>
<a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Universal Code Validation Platform"</span>
<a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="n">requires-python</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&gt;=3.8"</span>
<a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="s2">"pydantic&gt;=2.0.0"</span><span class="p">,</span>
<a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="s2">"pyyaml&gt;=6.0"</span><span class="p">,</span>
<a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="s2">"requests&gt;=2.31.0"</span><span class="p">,</span>
<a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">    </span><span class="c1"># ... all runtime dependencies</span>
<a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="p">]</span>
<a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>
<a href="#__codelineno-9-13" id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="k">[project.scripts]</span>
<a href="#__codelineno-9-14" id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="n">huskycat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"huskycat.__main__:main"</span>
<a href="#__codelineno-9-15" id="__codelineno-9-15" name="__codelineno-9-15"></a>
<a href="#__codelineno-9-16" id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="k">[tool.uv]</span>
<a href="#__codelineno-9-17" id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="n">dev-dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a href="#__codelineno-9-18" id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="s2">"pytest&gt;=8.0.0"</span><span class="p">,</span>
<a href="#__codelineno-9-19" id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">    </span><span class="s2">"hypothesis&gt;=6.98.0"</span><span class="p">,</span>
<a href="#__codelineno-9-20" id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">    </span><span class="s2">"black&gt;=24.1.1"</span><span class="p">,</span>
<a href="#__codelineno-9-21" id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">    </span><span class="c1"># ... all dev dependencies</span>
<a href="#__codelineno-9-22" id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="p">]</span>
</code></pre></div>
<h3 id="execution-flow_1">Execution Flow<a class="headerlink" href="#execution-flow_1" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>graph TD
    A[npm run validate] --&gt; B[uv run python3 -m src.huskycat]
    B --&gt; C[Python loads src/huskycat/__init__.py]
    C --&gt; D[Imports __main__.py]
    D --&gt; E[Calls main function]
    E --&gt; F[mode_detector.detect_mode]
    F --&gt; G[Same flow as binary execution]

    style B fill:#e1f5fe
    style G fill:#f3e5f5</code></pre>
<h3 id="differences-from-binary-execution">Differences from Binary Execution<a class="headerlink" href="#differences-from-binary-execution" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Binary Execution</th>
<th>UV Development Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Startup Time</strong></td>
<td>~100ms (PyInstaller cached)</td>
<td>~200ms (Python import overhead)</td>
</tr>
<tr>
<td><strong>Packaging</strong></td>
<td>Single-file executable</td>
<td>Python package + dependencies</td>
</tr>
<tr>
<td><strong>Tool Availability</strong></td>
<td>Same logic (local OR container)</td>
<td>Same logic (local OR container)</td>
</tr>
<tr>
<td><strong>Use Case</strong></td>
<td>Production, git hooks</td>
<td>Development, testing</td>
</tr>
<tr>
<td><strong>Portability</strong></td>
<td>Standalone binary</td>
<td>Requires Python + UV</td>
</tr>
</tbody>
</table>
<p><strong>File References</strong>:
- NPM scripts: <code>package.json:8-19</code>
- Python package config: <code>pyproject.toml:1-100</code>
- UV setup in CI: <code>.gitlab-ci.yml:36-42</code></p>
<h3 id="use-cases_2">Use Cases<a class="headerlink" href="#use-cases_2" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Development</strong>: Fast iteration without rebuilding binary</li>
<li><strong>Testing</strong>: Access to pytest fixtures and dev dependencies</li>
<li><strong>CI Setup</strong>: UV used in all CI jobs (<code>.gitlab-ci.yml:36-42</code>)</li>
</ul>
<p><strong>Example Usage</strong>:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="c1"># Development workflow</span>
<a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>npm<span class="w"> </span>run<span class="w"> </span>validate<span class="w">              </span><span class="c1"># Quick validation</span>
<a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a>npm<span class="w"> </span>run<span class="w"> </span>dev<span class="w"> </span>--<span class="w"> </span>validate<span class="w"> </span>--fix<span class="w"> </span><span class="c1"># Auto-fix with prompts</span>
<a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a>npm<span class="w"> </span>run<span class="w"> </span>mcp:server<span class="w">            </span><span class="c1"># Start MCP server for Claude Code</span>
<a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>npm<span class="w"> </span>run<span class="w"> </span>hooks:install<span class="w">         </span><span class="c1"># Install git hooks</span>
</code></pre></div></p>
<hr/>
<h2 id="execution-model-selection-by-use-case">Execution Model Selection by Use Case<a class="headerlink" href="#execution-model-selection-by-use-case" title="Permanent link">¶</a></h2>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Execution Model</th>
<th>Container Required?</th>
<th>Tools Available</th>
<th>File Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Git Hooks</strong></td>
<td>Binary (container fallback)</td>
<td>YES (runtime check)</td>
<td>Fast subset</td>
<td><code>core/adapters/git_hooks.py</code></td>
</tr>
<tr>
<td><strong>CI/CD</strong></td>
<td>Container (explicit in CI config)</td>
<td>YES (CI enforced)</td>
<td>All tools</td>
<td><code>.gitlab-ci.yml:44-120</code></td>
</tr>
<tr>
<td><strong>CLI Development</strong></td>
<td>Binary OR UV</td>
<td>YES (runtime check)</td>
<td>All configured</td>
<td><code>core/adapters/cli.py</code></td>
</tr>
<tr>
<td><strong>MCP Server</strong></td>
<td>Host process (container-delegated)</td>
<td>YES (for validation)</td>
<td>All available</td>
<td><code>mcp_server.py:1-150</code></td>
</tr>
<tr>
<td><strong>Pipeline Integration</strong></td>
<td>Container (preferred)</td>
<td>Context-dependent</td>
<td>All tools</td>
<td><code>core/adapters/pipeline.py</code></td>
</tr>
</tbody>
</table>
<h3 id="fast-tools-subset-git-hooks">Fast Tools Subset (Git Hooks)<a class="headerlink" href="#fast-tools-subset-git-hooks" title="Permanent link">¶</a></h3>
<p><strong>Implementation</strong>: <code>core/adapters/base.py:312-332</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_tool_selection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">    </span><span class="sd">"""Get tools to run based on mode configuration"""</span>
<a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">==</span> <span class="s2">"fast"</span><span class="p">:</span>
<a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a>        <span class="k">return</span> <span class="p">[</span><span class="s2">"black"</span><span class="p">,</span> <span class="s2">"ruff"</span><span class="p">,</span> <span class="s2">"mypy"</span><span class="p">,</span> <span class="s2">"flake8"</span><span class="p">]</span>
<a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">==</span> <span class="s2">"all"</span><span class="p">:</span>
<a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_all_available_tools</span><span class="p">()</span>
<a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a>    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">tools</span> <span class="o">==</span> <span class="s2">"configured"</span><span class="p">:</span>
<a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_from_config</span><span class="p">()</span>
<a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a>    <span class="k">else</span><span class="p">:</span>
<a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a>        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div>
<p><strong>Rationale</strong>: Git hooks need sub-5-second execution for good developer experience.</p>
<h3 id="all-tools-ci-mode">All Tools (CI Mode)<a class="headerlink" href="#all-tools-ci-mode" title="Permanent link">¶</a></h3>
<p><strong>Tools</strong> (<code>ContainerFile:24-106</code>):
- Python: black, flake8, mypy, ruff, pylint, bandit, autoflake, isort
- JavaScript: eslint, prettier, typescript
- Shell: shellcheck
- Docker: hadolint
- TOML: taplo
- YAML: yamllint
- Ansible: ansible-lint
- Terraform: terraform fmt
- Security: safety, bandit</p>
<hr/>
<h2 id="container-runtime-requirements">Container Runtime Requirements<a class="headerlink" href="#container-runtime-requirements" title="Permanent link">¶</a></h2>
<h3 id="when-container-runtime-is-required">When Container Runtime is Required<a class="headerlink" href="#when-container-runtime-is-required" title="Permanent link">¶</a></h3>
<p><strong>Required</strong> (enforced by code):
- <strong>CI Mode</strong>: Container execution enforced in <code>.gitlab-ci.yml</code> jobs
- <strong>Comprehensive Validation</strong>: <code>validate --all</code> needs all tools
- <strong>Pipeline Mode</strong>: JSON output for CI/CD integration</p>
<p><strong>File Reference</strong>: <code>unified_validation.py:154-170</code></p>
<h3 id="when-container-runtime-is-optional">When Container Runtime is Optional<a class="headerlink" href="#when-container-runtime-is-optional" title="Permanent link">¶</a></h3>
<p><strong>Never</strong> - Current implementation ALWAYS requires container runtime for host execution.</p>
<p><strong>Code Evidence</strong>:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="c1"># unified_validation.py:154-170</span>
<a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_container_runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="sd">"""Get available container runtime or raise error"""</span>
<a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a>    <span class="c1"># ... attempts to find podman/docker ...</span>
<a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a>    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a>        <span class="s2">"No container runtime found. Please install podman or docker."</span>
<a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a>    <span class="p">)</span>
</code></pre></div></p>
<p><strong>Design Decision</strong>: Prioritize consistency and security over local tool execution. No silent fallback to potentially outdated/misconfigured local tools.</p>
<h3 id="fallback-behavior">Fallback Behavior<a class="headerlink" href="#fallback-behavior" title="Permanent link">¶</a></h3>
<p><strong>Current</strong>: RuntimeError raised if no container runtime available</p>
<p><strong>Alternative</strong> (not implemented): Could fall back to local tools with warning</p>
<p><strong>Tradeoff</strong>:
- Current approach: Guarantees consistent validation environment
- Alternative approach: More flexible but less consistent</p>
<hr/>
<h2 id="implementation-files-reference">Implementation Files Reference<a class="headerlink" href="#implementation-files-reference" title="Permanent link">¶</a></h2>
<h3 id="core-execution-logic">Core Execution Logic<a class="headerlink" href="#core-execution-logic" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Entry points</strong>: <code>huskycat_main.py:1-27</code>, <code>src/huskycat/__main__.py:1-349</code></li>
<li><strong>Validation engine</strong>: <code>src/huskycat/unified_validation.py:1-200</code></li>
<li><strong>Tool execution</strong>: <code>src/huskycat/unified_validation.py:85-170</code></li>
<li><strong>Container detection</strong>: <code>src/huskycat/unified_validation.py:111-120</code></li>
</ul>
<h3 id="mode-detection-routing">Mode Detection &amp; Routing<a class="headerlink" href="#mode-detection-routing" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Mode detector</strong>: <code>src/huskycat/core/mode_detector.py:1-190</code></li>
<li><strong>Factory pattern</strong>: <code>src/huskycat/core/factory.py:1-150</code></li>
<li><strong>Base adapter</strong>: <code>src/huskycat/core/adapters/base.py:1-333</code></li>
</ul>
<h3 id="mode-specific-adapters">Mode-Specific Adapters<a class="headerlink" href="#mode-specific-adapters" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Git Hooks</strong>: <code>src/huskycat/core/adapters/git_hooks.py</code></li>
<li><strong>CI</strong>: <code>src/huskycat/core/adapters/ci.py</code></li>
<li><strong>CLI</strong>: <code>src/huskycat/core/adapters/cli.py</code></li>
<li><strong>Pipeline</strong>: <code>src/huskycat/core/adapters/pipeline.py</code></li>
<li><strong>MCP</strong>: <code>src/huskycat/core/adapters/mcp.py</code></li>
</ul>
<h3 id="build-distribution">Build &amp; Distribution<a class="headerlink" href="#build-distribution" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Container build</strong>: <code>.gitlab-ci.yml:158-218</code></li>
<li><strong>Binary build</strong>: <code>.gitlab-ci.yml:268-298</code></li>
<li><strong>Python package</strong>: <code>.gitlab-ci.yml:237-267</code></li>
<li><strong>Container definition</strong>: <code>ContainerFile:1-153</code></li>
</ul>
<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Python package</strong>: <code>pyproject.toml:1-100</code></li>
<li><strong>NPM scripts</strong>: <code>package.json:1-50</code></li>
<li><strong>PyInstaller</strong>: <code>huskycat_main.py:1-27</code></li>
</ul>
<hr/>
<h2 id="architecture-diagram-execution-model-selection">Architecture Diagram: Execution Model Selection<a class="headerlink" href="#architecture-diagram-execution-model-selection" title="Permanent link">¶</a></h2>
<pre class="mermaid"><code>graph TB
    subgraph "Entry Points"
        A1[Binary: ./dist/huskycat]
        A2[UV: npm run dev]
        A3[Container: docker run]
    end

    A1 --&gt; B[huskycat_main.py:main]
    A2 --&gt; B
    A3 --&gt; C[__main__.py:main]
    B --&gt; C

    C --&gt; D[mode_detector.detect_mode]
    D --&gt; E{Execution Context?}

    E --&gt;|In Container| F[unified_validation.py:_is_running_in_container = True]
    E --&gt;|On Host| G[unified_validation.py:_is_running_in_container = False]

    F --&gt; H[Direct Tool Execution]
    H --&gt; I[subprocess.run black --check src/]

    G --&gt; J{Container Runtime Available?}
    J --&gt;|Yes| K[Container-Delegated Execution]
    J --&gt;|No| L[RuntimeError: No container runtime]

    K --&gt; M[_get_container_runtime: podman/docker]
    M --&gt; N[_build_container_command]
    N --&gt; O[subprocess.run podman run ... black --check src/]

    style E fill:#fff3e0
    style F fill:#e8f5e8
    style G fill:#fff3e0
    style L fill:#ffebee
    style H fill:#e8f5e8
    style K fill:#e1f5fe</code></pre>
<p><strong>File References</strong>:
- Entry points: <code>huskycat_main.py:1-27</code>, <code>package.json:8-19</code>, <code>ContainerFile:152</code>
- Main CLI: <code>__main__.py:1-349</code>
- Mode detection: <code>mode_detector.py:30-82</code>
- Context detection: <code>unified_validation.py:111-120</code>
- Container runtime: <code>unified_validation.py:154-170</code>
- Command execution: <code>unified_validation.py:122-150</code></p>
<hr/>
<h2 id="summary-the-truth-about-container-only">Summary: The Truth About "Container-Only"<a class="headerlink" href="#summary-the-truth-about-container-only" title="Permanent link">¶</a></h2>
<p><strong>FALSE CLAIM</strong>: "HuskyCat enforces container-only execution"</p>
<p><strong>REALITY</strong>:
- HuskyCat supports THREE execution models (Binary, Container, UV)
- Container execution is <strong>preferred</strong> for consistency
- Container runtime is <strong>required</strong> for host execution (RuntimeError if missing)
- Direct tool execution is used when running <strong>inside</strong> a container
- Container is <strong>delegated</strong> when running on host with runtime available</p>
<p><strong>Code Evidence</strong>:
- Execution routing: <code>unified_validation.py:122-150</code>
- Context detection: <code>unified_validation.py:111-120</code>
- Runtime requirement: <code>unified_validation.py:154-170</code></p>
<p><strong>Accurate Description</strong>: "HuskyCat uses container-delegated execution from host environments (requires podman/docker) or direct execution inside containers for guaranteed tool consistency."</p>
<hr/>
<h2 id="model-4-non-blocking-mode-sprint-10">Model 4: Non-Blocking Mode (Sprint 10)<a class="headerlink" href="#model-4-non-blocking-mode-sprint-10" title="Permanent link">¶</a></h2>
<h3 id="overview_1">Overview<a class="headerlink" href="#overview_1" title="Permanent link">¶</a></h3>
<p>Non-blocking mode allows git operations to complete immediately (&lt;100ms) while validation runs in background.</p>
<p><strong>Implementation</strong>: <code>src/huskycat/core/adapters/git_hooks_nonblocking.py</code></p>
<h3 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>graph TB
    A[Git Hook Invoked] --&gt; B[Parent Process]
    B --&gt; C{Check Previous Run}
    C --&gt;|Failed| D[Prompt User]
    C --&gt;|Passed| E[Fork Child Process]
    D --&gt;|Abort| F[Exit 1]
    D --&gt;|Continue| E
    E --&gt; G[Save PID]
    G --&gt; H[Return Immediately &lt; 100ms]
    H --&gt; I[Git Commit Proceeds]

    E --&gt; J[Child Process Background]
    J --&gt; K[Initialize TUI]
    K --&gt; L[Execute Tools in Parallel]
    L --&gt; M[Update TUI Real-time]
    M --&gt; N[Save Results]
    N --&gt; O[Exit 0/1]

    style H fill:#e8f5e8
    style I fill:#e8f5e8
    style J fill:#fff3e0</code></pre>
<h3 id="performance-characteristics">Performance Characteristics<a class="headerlink" href="#performance-characteristics" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Blocking</th>
<th>Non-Blocking</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time to commit</td>
<td>30s</td>
<td>&lt;0.1s</td>
<td>300x faster</td>
</tr>
<tr>
<td>Full validation</td>
<td>30s</td>
<td>10s</td>
<td>3x faster</td>
</tr>
<tr>
<td>Tools run</td>
<td>4</td>
<td>15+</td>
<td>3.75x more</td>
</tr>
<tr>
<td>User experience</td>
<td>Poor</td>
<td>Excellent</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="configuration_1">Configuration<a class="headerlink" href="#configuration_1" title="Permanent link">¶</a></h3>
<p><strong>File</strong>: <code>.huskycat.yaml</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">"1.0"</span>
<a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="nt">feature_flags</span><span class="p">:</span>
<a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="nt">nonblocking_hooks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># Enable non-blocking git hooks</span>
<a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="nt">parallel_execution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">     </span><span class="c1"># Enable parallel tool execution</span>
<a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span><span class="nt">tui_progress</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">           </span><span class="c1"># Enable TUI progress display</span>
<a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="nt">cache_results</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">          </span><span class="c1"># Cache validation results</span>
</code></pre></div>
<h3 id="process-management">Process Management<a class="headerlink" href="#process-management" title="Permanent link">¶</a></h3>
<p><strong>Implementation</strong>: <code>src/huskycat/core/process_manager.py</code></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ProcessManager</span><span class="p">:</span>
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="sd">"""Manages background validation processes"""</span>
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>
<a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fork_validation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">        </span><span class="sd">"""Fork validation process, return immediately"""</span>
<a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>        <span class="n">pid</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">fork</span><span class="p">()</span>
<a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>        <span class="k">if</span> <span class="n">pid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>            <span class="c1"># Child process: run validation</span>
<a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_run_validation_with_tui</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
<a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a>        <span class="k">else</span><span class="p">:</span>
<a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a>            <span class="c1"># Parent process: save PID and return</span>
<a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_save_pid</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
<a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a>            <span class="k">return</span> <span class="n">pid</span>
<a href="#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a>
<a href="#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_previous_run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ValidationResult</span><span class="p">]:</span>
<a href="#__codelineno-14-17" id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="w">        </span><span class="sd">"""Check if previous validation failed"""</span>
<a href="#__codelineno-14-18" id="__codelineno-14-18" name="__codelineno-14-18"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_last_result</span><span class="p">()</span>
<a href="#__codelineno-14-19" id="__codelineno-14-19" name="__codelineno-14-19"></a>        <span class="k">if</span> <span class="n">result</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">success</span><span class="p">:</span>
<a href="#__codelineno-14-20" id="__codelineno-14-20" name="__codelineno-14-20"></a>            <span class="k">return</span> <span class="n">result</span>
<a href="#__codelineno-14-21" id="__codelineno-14-21" name="__codelineno-14-21"></a>        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
<h3 id="tui-integration">TUI Integration<a class="headerlink" href="#tui-integration" title="Permanent link">¶</a></h3>
<p><strong>Implementation</strong>: <code>src/huskycat/core/tui.py</code></p>
<p>Real-time progress display using Rich library:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>┌─────────────────────────────────────────┐
<a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>│ HuskyCat Validation (Non-Blocking Mode) │
<a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>├──────────┬─────────┬──────┬────────┬────┤
<a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>│ Tool     │ Status  │ Time │ Errors │    │
<a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>├──────────┼─────────┼──────┼────────┼────┤
<a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>│ Overall  │ ████░░  │ 5.2s │        │    │
<a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>├──────────┼─────────┼──────┼────────┼────┤
<a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>│ black    │ ✓ Done  │ 0.3s │ 0      │    │
<a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>│ ruff     │ ✓ Done  │ 0.5s │ 0      │    │
<a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>│ mypy     │ ⠋ Run   │ 3.2s │ -      │    │
<a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>│ flake8   │ • Pend  │ -    │ -      │    │
<a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>└──────────┴─────────┴──────┴────────┴────┘
</code></pre></div>
<h3 id="cache-structure">Cache Structure<a class="headerlink" href="#cache-structure" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>.huskycat/
<a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>  runs/
<a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a>    pids/
<a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a>      12345.json           # PID file for running process
<a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a>    logs/
<a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a>      20240315_142530.log  # Validation output log
<a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a>    20240315_142530.json   # Run result cache
<a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a>    last_run.json          # Most recent run pointer
</code></pre></div>
<h3 id="use-cases_3">Use Cases<a class="headerlink" href="#use-cases_3" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Git Hooks</strong>: Fast commit experience with comprehensive validation</li>
<li><strong>Development</strong>: Immediate feedback without blocking workflow</li>
<li><strong>CI/CD</strong>: Background validation during pipeline execution</li>
</ul>
<p><strong>File References</strong>:
- Non-blocking adapter: <code>src/huskycat/core/adapters/git_hooks_nonblocking.py</code>
- Process manager: <code>src/huskycat/core/process_manager.py</code>
- TUI: <code>src/huskycat/core/tui.py</code>
- Documentation: <code>docs/nonblocking-hooks.md</code></p>
<hr/>
<h2 id="model-5-embedded-tools-mode-sprint-10">Model 5: Embedded Tools Mode (Sprint 10)<a class="headerlink" href="#model-5-embedded-tools-mode-sprint-10" title="Permanent link">¶</a></h2>
<h3 id="overview_2">Overview<a class="headerlink" href="#overview_2" title="Permanent link">¶</a></h3>
<p>Embedded tools mode bundles validation tools directly in fat binaries, eliminating container runtime dependency.</p>
<p><strong>Implementation</strong>: <code>src/huskycat/core/tool_extractor.py</code></p>
<h3 id="tool-resolution-priority">Tool Resolution Priority<a class="headerlink" href="#tool-resolution-priority" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>1. Bundled tools      (~/.huskycat/tools/)  ← HIGHEST PRIORITY
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>2. Local tools        (system PATH)
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>3. Container tools    (if already in container)
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>4. Container runtime  (fallback, with warning) ← LOWEST PRIORITY
</code></pre></div>
<h3 id="architecture_1">Architecture<a class="headerlink" href="#architecture_1" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>graph TB
    A[Binary Starts] --&gt; B[Tool Extractor]
    B --&gt; C{Check ~/.huskycat/tools/.version}
    C --&gt;|Match| D[Use Cached Tools]
    C --&gt;|Mismatch| E[Extract Tools]
    E --&gt; F[Write Version File]
    F --&gt; D
    D --&gt; G[Execute Validation]

    G --&gt; H{Tool Available?}
    H --&gt;|Bundled| I[Direct Execution 0.42s]
    H --&gt;|Local| J[System PATH 0.31s]
    H --&gt;|Container| K[Container 1.87s]

    style I fill:#e8f5e8
    style J fill:#e1f5fe
    style K fill:#fff3e0</code></pre>
<h3 id="performance-comparison">Performance Comparison<a class="headerlink" href="#performance-comparison" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Speed</th>
<th>Portability</th>
<th>Startup Overhead</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Bundled</strong></td>
<td>0.42s</td>
<td>★★★★★</td>
<td>None</td>
</tr>
<tr>
<td><strong>Local</strong></td>
<td>0.31s</td>
<td>★★★☆☆</td>
<td>None</td>
</tr>
<tr>
<td><strong>Container</strong></td>
<td>1.87s</td>
<td>★★★★☆</td>
<td>1-3s</td>
</tr>
</tbody>
</table>
<p><strong>Result</strong>: Bundled tools are 4.5x faster than container mode.</p>
<h3 id="fat-binary-structure">Fat Binary Structure<a class="headerlink" href="#fat-binary-structure" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a>huskycat (150-200MB)
<a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>├── Python runtime (40MB)
<a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>├── HuskyCat code (5MB)
<a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>├── Embedded tools (100-150MB)
<a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a>│   ├── shellcheck
<a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>│   ├── hadolint
<a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>│   ├── taplo
<a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>│   └── versions.txt
<a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a>└── Formatters (5MB)
<a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>    └── chapel-format
</code></pre></div>
<h3 id="tool-extraction-process">Tool Extraction Process<a class="headerlink" href="#tool-extraction-process" title="Permanent link">¶</a></h3>
<p><strong>Phase 1: Bundle Creation</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1"># Download platform-specific tools</span>
<a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>python<span class="w"> </span>scripts/download_tools.py<span class="w"> </span>--platform<span class="w"> </span>darwin-arm64
<a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>
<a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="c1"># Build fat binary with embedded tools</span>
<a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>python<span class="w"> </span>build_fat_binary.py<span class="w"> </span>--platform<span class="w"> </span>darwin-arm64
</code></pre></div>
<p><strong>Phase 2: First Run Extraction</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="c1"># In __main__.py</span>
<a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">.core.tool_extractor</span><span class="w"> </span><span class="kn">import</span> <span class="n">ensure_tools</span>
<a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="n">ensure_tools</span><span class="p">()</span>
<a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a>
<a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="c1"># Extracts to:</span>
<a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="c1"># ~/.huskycat/tools/shellcheck</span>
<a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="c1"># ~/.huskycat/tools/hadolint</span>
<a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="c1"># ~/.huskycat/tools/taplo</span>
<a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="c1"># ~/.huskycat/tools/.version</span>
</code></pre></div>
<p><strong>Phase 3: Version Tracking</strong></p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">needs_extraction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="sd">"""Check if extraction needed"""</span>
<a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>    <span class="n">bundle_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_version</span><span class="p">()</span>
<a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a>    <span class="n">cached_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cached_version</span><span class="p">()</span>
<a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a>    <span class="k">return</span> <span class="n">bundle_version</span> <span class="o">!=</span> <span class="n">cached_version</span>
</code></pre></div>
<h3 id="platform-support">Platform Support<a class="headerlink" href="#platform-support" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Binary Name</th>
<th>Size</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>darwin-arm64</td>
<td>huskycat</td>
<td>~180MB</td>
<td>✅ Supported</td>
</tr>
<tr>
<td>darwin-amd64</td>
<td>huskycat</td>
<td>~190MB</td>
<td>✅ Supported</td>
</tr>
<tr>
<td>linux-arm64</td>
<td>huskycat</td>
<td>~170MB</td>
<td>✅ Supported</td>
</tr>
<tr>
<td>linux-amd64</td>
<td>huskycat</td>
<td>~175MB</td>
<td>✅ Supported</td>
</tr>
</tbody>
</table>
<h3 id="configuration_2">Configuration<a class="headerlink" href="#configuration_2" title="Permanent link">¶</a></h3>
<p><strong>Automatic mode selection</strong> (no configuration needed):</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">_get_execution_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">    </span><span class="sd">"""Auto-detect execution mode"""</span>
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_running_in_container</span><span class="p">():</span>
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a>        <span class="k">return</span> <span class="s2">"container"</span>
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a>
<a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a>    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s1">'frozen'</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a>        <span class="n">bundled_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">".huskycat"</span> <span class="o">/</span> <span class="s2">"tools"</span>
<a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a>        <span class="k">if</span> <span class="n">bundled_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a>            <span class="k">return</span> <span class="s2">"bundled"</span>
<a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a>
<a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a>    <span class="k">return</span> <span class="s2">"local"</span>
</code></pre></div>
<h3 id="use-cases_4">Use Cases<a class="headerlink" href="#use-cases_4" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Portable Validation</strong>: Single binary runs anywhere without dependencies</li>
<li><strong>CI/CD Pipelines</strong>: No container runtime required</li>
<li><strong>Git Hooks</strong>: Fast startup without container overhead</li>
<li><strong>Offline Environments</strong>: All tools bundled, no network access needed</li>
</ul>
<p><strong>File References</strong>:
- Tool extractor: <code>src/huskycat/core/tool_extractor.py</code>
- Build script: <code>build_fat_binary.py</code>
- Download script: <code>scripts/download_tools.py</code>
- Documentation: <code>docs/FAT_BINARY_ARCHITECTURE.md</code>, <code>docs/EMBEDDED_TOOL_EXECUTION.md</code></p>
<hr/>
<h2 id="model-6-parallel-execution-sprint-10">Model 6: Parallel Execution (Sprint 10)<a class="headerlink" href="#model-6-parallel-execution-sprint-10" title="Permanent link">¶</a></h2>
<h3 id="overview_3">Overview<a class="headerlink" href="#overview_3" title="Permanent link">¶</a></h3>
<p>Parallel execution runs independent validation tools concurrently using intelligent dependency management.</p>
<p><strong>Implementation</strong>: <code>src/huskycat/core/parallel_executor.py</code></p>
<h3 id="dependency-graph">Dependency Graph<a class="headerlink" href="#dependency-graph" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>Level 0 (9 tools in parallel):
<a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>  - autoflake, black, chapel-format, hadolint
<a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a>  - isort, ruff, shellcheck, taplo, yamllint
<a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a>Level 1 (6 tools in parallel):
<a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a>  - ansible-lint (depends on: yamllint)
<a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a>  - bandit (depends on: black)
<a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a>  - flake8 (depends on: black, isort)
<a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a>  - gitlab-ci (depends on: yamllint)
<a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a>  - helm-lint (depends on: yamllint)
<a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a>  - mypy (depends on: black, isort)
</code></pre></div>
<h3 id="performance-characteristics_1">Performance Characteristics<a class="headerlink" href="#performance-characteristics_1" title="Permanent link">¶</a></h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Total Tools</td>
<td>15</td>
</tr>
<tr>
<td>Execution Levels</td>
<td>2</td>
</tr>
<tr>
<td>Max Parallelism</td>
<td>9 tools concurrently</td>
</tr>
<tr>
<td>Average Parallelism</td>
<td>7.5 tools per level</td>
</tr>
<tr>
<td><strong>Speedup Factor</strong></td>
<td><strong>7.5x faster than sequential</strong></td>
</tr>
</tbody>
</table>
<h3 id="execution-flow_2">Execution Flow<a class="headerlink" href="#execution-flow_2" title="Permanent link">¶</a></h3>
<pre class="mermaid"><code>graph TD
    A[ParallelExecutor] --&gt; B[Build Dependency Graph]
    B --&gt; C[Topological Sort]
    C --&gt; D[Level 0: 9 tools]
    C --&gt; E[Level 1: 6 tools]

    D --&gt; F1[black]
    D --&gt; F2[ruff]
    D --&gt; F3[isort]
    D --&gt; F4[yamllint]
    D --&gt; F5[shellcheck]
    D --&gt; F6[hadolint]
    D --&gt; F7[taplo]
    D --&gt; F8[autoflake]
    D --&gt; F9[chapel-format]

    F1 --&gt; G1[mypy]
    F1 --&gt; G2[flake8]
    F1 --&gt; G3[bandit]
    F3 --&gt; G1
    F3 --&gt; G2
    F4 --&gt; G4[gitlab-ci]
    F4 --&gt; G5[ansible-lint]
    F4 --&gt; G6[helm-lint]

    E --&gt; G1
    E --&gt; G2
    E --&gt; G3
    E --&gt; G4
    E --&gt; G5
    E --&gt; G6

    style D fill:#e8f5e8
    style E fill:#e1f5fe</code></pre>
<h3 id="configuration_3">Configuration<a class="headerlink" href="#configuration_3" title="Permanent link">¶</a></h3>
<p><strong>Automatic in non-blocking mode</strong>:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="nt">feature_flags</span><span class="p">:</span>
<a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">  </span><span class="nt">parallel_execution</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># Enable parallel execution</span>
<a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">  </span><span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span><span class="w">                </span><span class="c1"># Worker pool size</span>
<a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">  </span><span class="nt">timeout_per_tool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span><span class="w">        </span><span class="c1"># Per-tool timeout</span>
</code></pre></div>
<h3 id="resource-usage">Resource Usage<a class="headerlink" href="#resource-usage" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Memory</strong>: ~50MB per validation run</li>
<li><strong>CPU</strong>: Scales with available cores (8 workers default)</li>
<li><strong>Speedup</strong>: 7.5x faster than sequential execution</li>
</ul>
<h3 id="use-cases_5">Use Cases<a class="headerlink" href="#use-cases_5" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Non-Blocking Hooks</strong>: Maximum throughput for background validation</li>
<li><strong>CI/CD</strong>: Comprehensive validation in minimal time</li>
<li><strong>Development</strong>: Fast feedback loop during coding</li>
</ul>
<p><strong>File References</strong>:
- Parallel executor: <code>src/huskycat/core/parallel_executor.py</code>
- Documentation: <code>docs/parallel_executor.md</code></p>
<hr/>
<h2 id="execution-model-selection-by-use-case-updated">Execution Model Selection by Use Case (Updated)<a class="headerlink" href="#execution-model-selection-by-use-case-updated" title="Permanent link">¶</a></h2>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Execution Model</th>
<th>Mode</th>
<th>Tools Available</th>
<th>Performance</th>
<th>File Reference</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Git Hooks (Non-Blocking)</strong></td>
<td>Binary + Embedded</td>
<td>Non-blocking</td>
<td>All tools (15+)</td>
<td>&lt;100ms parent, 10s full</td>
<td><code>git_hooks_nonblocking.py</code></td>
</tr>
<tr>
<td><strong>Git Hooks (Legacy)</strong></td>
<td>Binary + Container</td>
<td>Blocking</td>
<td>Fast subset (4)</td>
<td>5-30s blocking</td>
<td><code>git_hooks.py</code></td>
</tr>
<tr>
<td><strong>Fat Binary</strong></td>
<td>Binary + Embedded</td>
<td>Any</td>
<td>All tools</td>
<td>0.42s per tool</td>
<td><code>tool_extractor.py</code></td>
</tr>
<tr>
<td><strong>CI/CD</strong></td>
<td>Container</td>
<td>CI</td>
<td>All tools</td>
<td>1.87s per tool</td>
<td><code>.gitlab-ci.yml</code></td>
</tr>
<tr>
<td><strong>CLI Development</strong></td>
<td>Binary/UV</td>
<td>CLI</td>
<td>All configured</td>
<td>Variable</td>
<td><code>cli.py</code></td>
</tr>
<tr>
<td><strong>MCP Server</strong></td>
<td>Host process</td>
<td>MCP</td>
<td>All available</td>
<td>Sub-second</td>
<td><code>mcp_server.py</code></td>
</tr>
<tr>
<td><strong>Pipeline</strong></td>
<td>Container</td>
<td>Pipeline</td>
<td>All tools</td>
<td>Variable</td>
<td><code>pipeline.py</code></td>
</tr>
</tbody>
</table>
<hr/>
<h2 id="related-documentation">Related Documentation<a class="headerlink" href="#related-documentation" title="Permanent link">¶</a></h2>
<ul>
<li><a href="../product-modes/">Product Modes</a> - 5 distinct modes with different requirements</li>
<li><a href="../simplified-architecture/">Architecture Overview</a> - High-level system design</li>
<li><a href="../../installation/">Installation Guide</a> - Setup for all execution models</li>
<li><a href="../../cli-reference/">CLI Reference</a> - Command-line interface usage</li>
<li><a href="../../nonblocking-hooks/">Non-Blocking Hooks</a> - Sprint 10 non-blocking mode</li>
<li><a href="../FAT_BINARY_ARCHITECTURE.md">Fat Binary Architecture</a> - Sprint 10 embedded tools</li>
<li><a href="../../parallel_executor/">Parallel Executor</a> - Sprint 10 parallel execution</li>
<li><a href="../../performance/">Performance Guide</a> - Benchmarks and optimization</li>
</ul>
<hr/>
<p><strong>Last Updated</strong>: 2025-12-12 (Sprint 11 Documentation Cleanup)
<strong>Verification Status</strong>: ⚠️ NEEDS DETAILED VERIFICATION - Line references outdated
<strong>Known Issues</strong>:
- Line references to <code>unified_validation.py:85-170</code> are outdated (file is 2,146 lines)
- Mermaid diagrams need verification against actual code flow
- Non-blocking and embedded tools modes (Sprint 10) added but need integration verification
<strong>Reviewed Files</strong>: 20+ source files, 5+ configuration files, 10+ CI jobs</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
</body>
</html>