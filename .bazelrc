# HuskyCat Bazel configuration

# Enable bzlmod (Bazel module system)
common --enable_bzlmod

# Reproducibility settings
build --incompatible_strict_action_env

# Disk cache for local and CI builds (Phase 2a quick win)
build --disk_cache=.cache/bazel

# Compression for remote cache (future Phase 2b)
build --experimental_remote_cache_compression

# Python configuration
build --python_version=PY3

# Test configuration
test --test_output=errors
test --test_verbose_timeout_warnings

# CI configuration (use with --config=ci)
build:ci --disk_cache=
build:ci --remote_download_minimal
build:ci --jobs=4
build:ci --color=yes

# Debug configuration (use with --config=debug)
build:debug --compilation_mode=dbg
build:debug --verbose_failures

# Release configuration (use with --config=release)
build:release --compilation_mode=opt
build:release --strip=always

# Production configuration (optimized builds)
build:prod --compilation_mode=opt
build:prod --jobs=auto

# Remote cache configuration (Phase 2b - bazel-remote server)
# Deployed on honey runner (100.77.196.50 via Tailscale)
build --remote_cache=grpc://100.77.196.50:19092
build --remote_upload_local_results=true
build --remote_timeout=3600
build --remote_download_minimal
